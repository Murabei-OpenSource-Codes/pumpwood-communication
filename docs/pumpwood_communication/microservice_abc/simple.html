<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.4"/>
    <title>pumpwood_communication.microservice_abc.simple API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../microservice_abc.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;pumpwood_communication.microservice_abc</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#ABCSimpleBatchMicroservice">ABCSimpleBatchMicroservice</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ABCSimpleBatchMicroservice.aggregate">aggregate</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ABCPermissionMicroservice">ABCPermissionMicroservice</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ABCPermissionMicroservice.check_if_logged">check_if_logged</a>
                        </li>
                        <li>
                                <a class="function" href="#ABCPermissionMicroservice.get_user_info">get_user_info</a>
                        </li>
                        <li>
                                <a class="function" href="#ABCPermissionMicroservice.check_permission">check_permission</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ABCSimpleRetriveMicroservice">ABCSimpleRetriveMicroservice</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ABCSimpleRetriveMicroservice.list_one">list_one</a>
                        </li>
                        <li>
                                <a class="function" href="#ABCSimpleRetriveMicroservice.retrieve">retrieve</a>
                        </li>
                        <li>
                                <a class="function" href="#ABCSimpleRetriveMicroservice.retrieve_file">retrieve_file</a>
                        </li>
                        <li>
                                <a class="function" href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file">retrieve_streaming_file</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ABCSimpleDeleteMicroservice">ABCSimpleDeleteMicroservice</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ABCSimpleDeleteMicroservice.delete">delete</a>
                        </li>
                        <li>
                                <a class="function" href="#ABCSimpleDeleteMicroservice.delete_file">delete_file</a>
                        </li>
                        <li>
                                <a class="function" href="#ABCSimpleDeleteMicroservice.remove_file_field">remove_file_field</a>
                        </li>
                        <li>
                                <a class="function" href="#ABCSimpleDeleteMicroservice.delete_many">delete_many</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../pumpwood_communication.html">pumpwood_communication</a><wbr>.<a href="./../microservice_abc.html">microservice_abc</a><wbr>.simple    </h1>

                        <div class="docstring"><p>Facilitate communication with Pumpowood backend.</p>

<p>This packages facilitates the communication with end-points with Pumpwood
pattern and helps with authentication.</p>

<p>Source-code at Github:<br>
<a href="https://github.com/Murabei-OpenSource-Codes/pumpwood-communication">https://github.com/Murabei-OpenSource-Codes/pumpwood-communication</a></p>
</div>

                        <input id="mod-simple-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-simple-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a><span class="sd">Facilitate communication with Pumpowood backend.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a><span class="sd">This packages facilitates the communication with end-points with Pumpwood</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="sd">pattern and helps with authentication.</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a><span class="sd">Source-code at Github:&lt;br&gt;</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a><span class="sd">https://github.com/Murabei-OpenSource-Codes/pumpwood-communication</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a><span class="n">__docformat__</span> <span class="o">=</span> <span class="s2">&quot;google&quot;</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.batch</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABCSimpleBatchMicroservice</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.permission</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABCPermissionMicroservice</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">14</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.retrieve</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABCSimpleRetriveMicroservice</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">15</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.delete</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABCSimpleDeleteMicroservice</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos">17</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">18</span></a>    <span class="n">ABCSimpleBatchMicroservice</span><span class="p">,</span> <span class="n">ABCPermissionMicroservice</span><span class="p">,</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">19</span></a>    <span class="n">ABCSimpleRetriveMicroservice</span><span class="p">,</span> <span class="n">ABCSimpleDeleteMicroservice</span><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="ABCSimpleBatchMicroservice">
                            <input id="ABCSimpleBatchMicroservice-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ABCSimpleBatchMicroservice</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="ABCSimpleBatchMicroservice-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleBatchMicroservice"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleBatchMicroservice-8"><a href="#ABCSimpleBatchMicroservice-8"><span class="linenos"> 8</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ABCSimpleBatchMicroservice</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="ABCSimpleBatchMicroservice-9"><a href="#ABCSimpleBatchMicroservice-9"><span class="linenos"> 9</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract class for batch end-points.&quot;&quot;&quot;</span>
</span><span id="ABCSimpleBatchMicroservice-10"><a href="#ABCSimpleBatchMicroservice-10"><span class="linenos">10</span></a>
</span><span id="ABCSimpleBatchMicroservice-11"><a href="#ABCSimpleBatchMicroservice-11"><span class="linenos">11</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ABCSimpleBatchMicroservice-12"><a href="#ABCSimpleBatchMicroservice-12"><span class="linenos">12</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_aggregate_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="ABCSimpleBatchMicroservice-13"><a href="#ABCSimpleBatchMicroservice-13"><span class="linenos">13</span></a>        <span class="k">return</span> <span class="s2">&quot;rest/</span><span class="si">%s</span><span class="s2">/aggregate/&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">lower</span><span class="p">(),)</span>
</span><span id="ABCSimpleBatchMicroservice-14"><a href="#ABCSimpleBatchMicroservice-14"><span class="linenos">14</span></a>
</span><span id="ABCSimpleBatchMicroservice-15"><a href="#ABCSimpleBatchMicroservice-15"><span class="linenos">15</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">aggregate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">group_by</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">agg</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="ABCSimpleBatchMicroservice-16"><a href="#ABCSimpleBatchMicroservice-16"><span class="linenos">16</span></a>                  <span class="n">filter_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">exclude_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="ABCSimpleBatchMicroservice-17"><a href="#ABCSimpleBatchMicroservice-17"><span class="linenos">17</span></a>                  <span class="n">order_by</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleBatchMicroservice-18"><a href="#ABCSimpleBatchMicroservice-18"><span class="linenos">18</span></a>                  <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="ABCSimpleBatchMicroservice-19"><a href="#ABCSimpleBatchMicroservice-19"><span class="linenos">19</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Save a list of objects with one request.</span>
</span><span id="ABCSimpleBatchMicroservice-20"><a href="#ABCSimpleBatchMicroservice-20"><span class="linenos">20</span></a>
</span><span id="ABCSimpleBatchMicroservice-21"><a href="#ABCSimpleBatchMicroservice-21"><span class="linenos">21</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleBatchMicroservice-22"><a href="#ABCSimpleBatchMicroservice-22"><span class="linenos">22</span></a><span class="sd">            model_class (str):</span>
</span><span id="ABCSimpleBatchMicroservice-23"><a href="#ABCSimpleBatchMicroservice-23"><span class="linenos">23</span></a><span class="sd">                Model class of the end-point that will be aggregated.</span>
</span><span id="ABCSimpleBatchMicroservice-24"><a href="#ABCSimpleBatchMicroservice-24"><span class="linenos">24</span></a><span class="sd">            group_by (List[str]):</span>
</span><span id="ABCSimpleBatchMicroservice-25"><a href="#ABCSimpleBatchMicroservice-25"><span class="linenos">25</span></a><span class="sd">                List of the fields that will be used on aggregation as</span>
</span><span id="ABCSimpleBatchMicroservice-26"><a href="#ABCSimpleBatchMicroservice-26"><span class="linenos">26</span></a><span class="sd">                group by.</span>
</span><span id="ABCSimpleBatchMicroservice-27"><a href="#ABCSimpleBatchMicroservice-27"><span class="linenos">27</span></a><span class="sd">            agg (dict):</span>
</span><span id="ABCSimpleBatchMicroservice-28"><a href="#ABCSimpleBatchMicroservice-28"><span class="linenos">28</span></a><span class="sd">                A dictionary with dictionary itens as `field` and `function`</span>
</span><span id="ABCSimpleBatchMicroservice-29"><a href="#ABCSimpleBatchMicroservice-29"><span class="linenos">29</span></a><span class="sd">                specifing the field that will be aggregated using a function.</span>
</span><span id="ABCSimpleBatchMicroservice-30"><a href="#ABCSimpleBatchMicroservice-30"><span class="linenos">30</span></a><span class="sd">            filter_dict (dict):</span>
</span><span id="ABCSimpleBatchMicroservice-31"><a href="#ABCSimpleBatchMicroservice-31"><span class="linenos">31</span></a><span class="sd">                Filter that will be applied before the aggregation.</span>
</span><span id="ABCSimpleBatchMicroservice-32"><a href="#ABCSimpleBatchMicroservice-32"><span class="linenos">32</span></a><span class="sd">            exclude_dict (dict):</span>
</span><span id="ABCSimpleBatchMicroservice-33"><a href="#ABCSimpleBatchMicroservice-33"><span class="linenos">33</span></a><span class="sd">                Exclude clause that will be applied before the aggregation.</span>
</span><span id="ABCSimpleBatchMicroservice-34"><a href="#ABCSimpleBatchMicroservice-34"><span class="linenos">34</span></a><span class="sd">            order_by (list):</span>
</span><span id="ABCSimpleBatchMicroservice-35"><a href="#ABCSimpleBatchMicroservice-35"><span class="linenos">35</span></a><span class="sd">                Ordenation acording to grouping elements. It can be used</span>
</span><span id="ABCSimpleBatchMicroservice-36"><a href="#ABCSimpleBatchMicroservice-36"><span class="linenos">36</span></a><span class="sd">                fields created as keys of agg dictinary.</span>
</span><span id="ABCSimpleBatchMicroservice-37"><a href="#ABCSimpleBatchMicroservice-37"><span class="linenos">37</span></a><span class="sd">            auth_header (dict):</span>
</span><span id="ABCSimpleBatchMicroservice-38"><a href="#ABCSimpleBatchMicroservice-38"><span class="linenos">38</span></a><span class="sd">                Authentication header used to impersonation of user.</span>
</span><span id="ABCSimpleBatchMicroservice-39"><a href="#ABCSimpleBatchMicroservice-39"><span class="linenos">39</span></a><span class="sd">            limit (int):</span>
</span><span id="ABCSimpleBatchMicroservice-40"><a href="#ABCSimpleBatchMicroservice-40"><span class="linenos">40</span></a><span class="sd">                Limit number of returned row at aggregation query.</span>
</span><span id="ABCSimpleBatchMicroservice-41"><a href="#ABCSimpleBatchMicroservice-41"><span class="linenos">41</span></a>
</span><span id="ABCSimpleBatchMicroservice-42"><a href="#ABCSimpleBatchMicroservice-42"><span class="linenos">42</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleBatchMicroservice-43"><a href="#ABCSimpleBatchMicroservice-43"><span class="linenos">43</span></a><span class="sd">            Return a DataFrame with aggregation results.</span>
</span><span id="ABCSimpleBatchMicroservice-44"><a href="#ABCSimpleBatchMicroservice-44"><span class="linenos">44</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleBatchMicroservice-45"><a href="#ABCSimpleBatchMicroservice-45"><span class="linenos">45</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_aggregate_url</span><span class="p">(</span><span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">)</span>
</span><span id="ABCSimpleBatchMicroservice-46"><a href="#ABCSimpleBatchMicroservice-46"><span class="linenos">46</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ABCSimpleBatchMicroservice-47"><a href="#ABCSimpleBatchMicroservice-47"><span class="linenos">47</span></a>            <span class="s1">&#39;agg&#39;</span><span class="p">:</span> <span class="n">agg</span><span class="p">,</span> <span class="s1">&#39;group_by&#39;</span><span class="p">:</span> <span class="n">group_by</span><span class="p">,</span> <span class="s1">&#39;filter_dict&#39;</span><span class="p">:</span> <span class="n">filter_dict</span><span class="p">,</span>
</span><span id="ABCSimpleBatchMicroservice-48"><a href="#ABCSimpleBatchMicroservice-48"><span class="linenos">48</span></a>            <span class="s1">&#39;exclude_dict&#39;</span><span class="p">:</span> <span class="n">exclude_dict</span><span class="p">,</span> <span class="s1">&#39;order_by&#39;</span><span class="p">:</span> <span class="n">order_by</span><span class="p">,</span>
</span><span id="ABCSimpleBatchMicroservice-49"><a href="#ABCSimpleBatchMicroservice-49"><span class="linenos">49</span></a>            <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="n">limit</span><span class="p">}</span>
</span><span id="ABCSimpleBatchMicroservice-50"><a href="#ABCSimpleBatchMicroservice-50"><span class="linenos">50</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_post</span><span class="p">(</span>
</span><span id="ABCSimpleBatchMicroservice-51"><a href="#ABCSimpleBatchMicroservice-51"><span class="linenos">51</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Abstract class for batch end-points.</p>
</div>


                            <div id="ABCSimpleBatchMicroservice.aggregate" class="classattr">
                                        <input id="ABCSimpleBatchMicroservice.aggregate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">aggregate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">group_by</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">agg</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">filter_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>,</span><span class="param">	<span class="n">exclude_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>,</span><span class="param">	<span class="n">order_by</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>,</span><span class="param">	<span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span>:</span></span>

                <label class="view-source-button" for="ABCSimpleBatchMicroservice.aggregate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleBatchMicroservice.aggregate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleBatchMicroservice.aggregate-15"><a href="#ABCSimpleBatchMicroservice.aggregate-15"><span class="linenos">15</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">aggregate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">group_by</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">agg</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-16"><a href="#ABCSimpleBatchMicroservice.aggregate-16"><span class="linenos">16</span></a>                  <span class="n">filter_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">exclude_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-17"><a href="#ABCSimpleBatchMicroservice.aggregate-17"><span class="linenos">17</span></a>                  <span class="n">order_by</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-18"><a href="#ABCSimpleBatchMicroservice.aggregate-18"><span class="linenos">18</span></a>                  <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-19"><a href="#ABCSimpleBatchMicroservice.aggregate-19"><span class="linenos">19</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Save a list of objects with one request.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-20"><a href="#ABCSimpleBatchMicroservice.aggregate-20"><span class="linenos">20</span></a>
</span><span id="ABCSimpleBatchMicroservice.aggregate-21"><a href="#ABCSimpleBatchMicroservice.aggregate-21"><span class="linenos">21</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-22"><a href="#ABCSimpleBatchMicroservice.aggregate-22"><span class="linenos">22</span></a><span class="sd">            model_class (str):</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-23"><a href="#ABCSimpleBatchMicroservice.aggregate-23"><span class="linenos">23</span></a><span class="sd">                Model class of the end-point that will be aggregated.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-24"><a href="#ABCSimpleBatchMicroservice.aggregate-24"><span class="linenos">24</span></a><span class="sd">            group_by (List[str]):</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-25"><a href="#ABCSimpleBatchMicroservice.aggregate-25"><span class="linenos">25</span></a><span class="sd">                List of the fields that will be used on aggregation as</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-26"><a href="#ABCSimpleBatchMicroservice.aggregate-26"><span class="linenos">26</span></a><span class="sd">                group by.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-27"><a href="#ABCSimpleBatchMicroservice.aggregate-27"><span class="linenos">27</span></a><span class="sd">            agg (dict):</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-28"><a href="#ABCSimpleBatchMicroservice.aggregate-28"><span class="linenos">28</span></a><span class="sd">                A dictionary with dictionary itens as `field` and `function`</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-29"><a href="#ABCSimpleBatchMicroservice.aggregate-29"><span class="linenos">29</span></a><span class="sd">                specifing the field that will be aggregated using a function.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-30"><a href="#ABCSimpleBatchMicroservice.aggregate-30"><span class="linenos">30</span></a><span class="sd">            filter_dict (dict):</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-31"><a href="#ABCSimpleBatchMicroservice.aggregate-31"><span class="linenos">31</span></a><span class="sd">                Filter that will be applied before the aggregation.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-32"><a href="#ABCSimpleBatchMicroservice.aggregate-32"><span class="linenos">32</span></a><span class="sd">            exclude_dict (dict):</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-33"><a href="#ABCSimpleBatchMicroservice.aggregate-33"><span class="linenos">33</span></a><span class="sd">                Exclude clause that will be applied before the aggregation.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-34"><a href="#ABCSimpleBatchMicroservice.aggregate-34"><span class="linenos">34</span></a><span class="sd">            order_by (list):</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-35"><a href="#ABCSimpleBatchMicroservice.aggregate-35"><span class="linenos">35</span></a><span class="sd">                Ordenation acording to grouping elements. It can be used</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-36"><a href="#ABCSimpleBatchMicroservice.aggregate-36"><span class="linenos">36</span></a><span class="sd">                fields created as keys of agg dictinary.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-37"><a href="#ABCSimpleBatchMicroservice.aggregate-37"><span class="linenos">37</span></a><span class="sd">            auth_header (dict):</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-38"><a href="#ABCSimpleBatchMicroservice.aggregate-38"><span class="linenos">38</span></a><span class="sd">                Authentication header used to impersonation of user.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-39"><a href="#ABCSimpleBatchMicroservice.aggregate-39"><span class="linenos">39</span></a><span class="sd">            limit (int):</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-40"><a href="#ABCSimpleBatchMicroservice.aggregate-40"><span class="linenos">40</span></a><span class="sd">                Limit number of returned row at aggregation query.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-41"><a href="#ABCSimpleBatchMicroservice.aggregate-41"><span class="linenos">41</span></a>
</span><span id="ABCSimpleBatchMicroservice.aggregate-42"><a href="#ABCSimpleBatchMicroservice.aggregate-42"><span class="linenos">42</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-43"><a href="#ABCSimpleBatchMicroservice.aggregate-43"><span class="linenos">43</span></a><span class="sd">            Return a DataFrame with aggregation results.</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-44"><a href="#ABCSimpleBatchMicroservice.aggregate-44"><span class="linenos">44</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-45"><a href="#ABCSimpleBatchMicroservice.aggregate-45"><span class="linenos">45</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_aggregate_url</span><span class="p">(</span><span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">)</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-46"><a href="#ABCSimpleBatchMicroservice.aggregate-46"><span class="linenos">46</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-47"><a href="#ABCSimpleBatchMicroservice.aggregate-47"><span class="linenos">47</span></a>            <span class="s1">&#39;agg&#39;</span><span class="p">:</span> <span class="n">agg</span><span class="p">,</span> <span class="s1">&#39;group_by&#39;</span><span class="p">:</span> <span class="n">group_by</span><span class="p">,</span> <span class="s1">&#39;filter_dict&#39;</span><span class="p">:</span> <span class="n">filter_dict</span><span class="p">,</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-48"><a href="#ABCSimpleBatchMicroservice.aggregate-48"><span class="linenos">48</span></a>            <span class="s1">&#39;exclude_dict&#39;</span><span class="p">:</span> <span class="n">exclude_dict</span><span class="p">,</span> <span class="s1">&#39;order_by&#39;</span><span class="p">:</span> <span class="n">order_by</span><span class="p">,</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-49"><a href="#ABCSimpleBatchMicroservice.aggregate-49"><span class="linenos">49</span></a>            <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="n">limit</span><span class="p">}</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-50"><a href="#ABCSimpleBatchMicroservice.aggregate-50"><span class="linenos">50</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_post</span><span class="p">(</span>
</span><span id="ABCSimpleBatchMicroservice.aggregate-51"><a href="#ABCSimpleBatchMicroservice.aggregate-51"><span class="linenos">51</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Save a list of objects with one request.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class (str):</strong>  Model class of the end-point that will be aggregated.</li>
<li><strong>group_by (List[str]):</strong>  List of the fields that will be used on aggregation as
group by.</li>
<li><strong>agg (dict):</strong>  A dictionary with dictionary itens as <code>field</code> and <code>function</code>
specifing the field that will be aggregated using a function.</li>
<li><strong>filter_dict (dict):</strong>  Filter that will be applied before the aggregation.</li>
<li><strong>exclude_dict (dict):</strong>  Exclude clause that will be applied before the aggregation.</li>
<li><strong>order_by (list):</strong>  Ordenation acording to grouping elements. It can be used
fields created as keys of agg dictinary.</li>
<li><strong>auth_header (dict):</strong>  Authentication header used to impersonation of user.</li>
<li><strong>limit (int):</strong>  Limit number of returned row at aggregation query.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return a DataFrame with aggregation results.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="ABCPermissionMicroservice">
                            <input id="ABCPermissionMicroservice-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ABCPermissionMicroservice</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="ABCPermissionMicroservice-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCPermissionMicroservice"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCPermissionMicroservice-7"><a href="#ABCPermissionMicroservice-7"><span class="linenos"> 7</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ABCPermissionMicroservice</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="ABCPermissionMicroservice-8"><a href="#ABCPermissionMicroservice-8"><span class="linenos"> 8</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract class for permission checking at pumpwood.&quot;&quot;&quot;</span>
</span><span id="ABCPermissionMicroservice-9"><a href="#ABCPermissionMicroservice-9"><span class="linenos"> 9</span></a>
</span><span id="ABCPermissionMicroservice-10"><a href="#ABCPermissionMicroservice-10"><span class="linenos">10</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_if_logged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice-11"><a href="#ABCPermissionMicroservice-11"><span class="linenos">11</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if user is logged.</span>
</span><span id="ABCPermissionMicroservice-12"><a href="#ABCPermissionMicroservice-12"><span class="linenos">12</span></a>
</span><span id="ABCPermissionMicroservice-13"><a href="#ABCPermissionMicroservice-13"><span class="linenos">13</span></a><span class="sd">        Args:</span>
</span><span id="ABCPermissionMicroservice-14"><a href="#ABCPermissionMicroservice-14"><span class="linenos">14</span></a><span class="sd">            auth_header (dict): = None</span>
</span><span id="ABCPermissionMicroservice-15"><a href="#ABCPermissionMicroservice-15"><span class="linenos">15</span></a><span class="sd">                AuthHeader to substitute the microservice original at</span>
</span><span id="ABCPermissionMicroservice-16"><a href="#ABCPermissionMicroservice-16"><span class="linenos">16</span></a><span class="sd">                request. If not passed, microservice object auth_header</span>
</span><span id="ABCPermissionMicroservice-17"><a href="#ABCPermissionMicroservice-17"><span class="linenos">17</span></a><span class="sd">                will be used.</span>
</span><span id="ABCPermissionMicroservice-18"><a href="#ABCPermissionMicroservice-18"><span class="linenos">18</span></a>
</span><span id="ABCPermissionMicroservice-19"><a href="#ABCPermissionMicroservice-19"><span class="linenos">19</span></a><span class="sd">        Returns:</span>
</span><span id="ABCPermissionMicroservice-20"><a href="#ABCPermissionMicroservice-20"><span class="linenos">20</span></a><span class="sd">            Return True if auth_header is looged and False if not</span>
</span><span id="ABCPermissionMicroservice-21"><a href="#ABCPermissionMicroservice-21"><span class="linenos">21</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCPermissionMicroservice-22"><a href="#ABCPermissionMicroservice-22"><span class="linenos">22</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice-23"><a href="#ABCPermissionMicroservice-23"><span class="linenos">23</span></a>            <span class="n">check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCPermissionMicroservice-24"><a href="#ABCPermissionMicroservice-24"><span class="linenos">24</span></a>                <span class="n">url</span><span class="o">=</span><span class="s2">&quot;rest/registration/check/&quot;</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice-25"><a href="#ABCPermissionMicroservice-25"><span class="linenos">25</span></a>                <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCPermissionMicroservice-26"><a href="#ABCPermissionMicroservice-26"><span class="linenos">26</span></a>        <span class="k">except</span> <span class="n">PumpWoodUnauthorized</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice-27"><a href="#ABCPermissionMicroservice-27"><span class="linenos">27</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="ABCPermissionMicroservice-28"><a href="#ABCPermissionMicroservice-28"><span class="linenos">28</span></a>        <span class="k">return</span> <span class="n">check</span>
</span><span id="ABCPermissionMicroservice-29"><a href="#ABCPermissionMicroservice-29"><span class="linenos">29</span></a>
</span><span id="ABCPermissionMicroservice-30"><a href="#ABCPermissionMicroservice-30"><span class="linenos">30</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice-31"><a href="#ABCPermissionMicroservice-31"><span class="linenos">31</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get user info.</span>
</span><span id="ABCPermissionMicroservice-32"><a href="#ABCPermissionMicroservice-32"><span class="linenos">32</span></a>
</span><span id="ABCPermissionMicroservice-33"><a href="#ABCPermissionMicroservice-33"><span class="linenos">33</span></a><span class="sd">        Args:</span>
</span><span id="ABCPermissionMicroservice-34"><a href="#ABCPermissionMicroservice-34"><span class="linenos">34</span></a><span class="sd">            auth_header (dict): = None</span>
</span><span id="ABCPermissionMicroservice-35"><a href="#ABCPermissionMicroservice-35"><span class="linenos">35</span></a><span class="sd">                AuthHeader to substitute the microservice original at</span>
</span><span id="ABCPermissionMicroservice-36"><a href="#ABCPermissionMicroservice-36"><span class="linenos">36</span></a><span class="sd">                request. If not passed, microservice object auth_header</span>
</span><span id="ABCPermissionMicroservice-37"><a href="#ABCPermissionMicroservice-37"><span class="linenos">37</span></a><span class="sd">                will be used.</span>
</span><span id="ABCPermissionMicroservice-38"><a href="#ABCPermissionMicroservice-38"><span class="linenos">38</span></a>
</span><span id="ABCPermissionMicroservice-39"><a href="#ABCPermissionMicroservice-39"><span class="linenos">39</span></a><span class="sd">        Returns:</span>
</span><span id="ABCPermissionMicroservice-40"><a href="#ABCPermissionMicroservice-40"><span class="linenos">40</span></a><span class="sd">            A serialized user object with information of the logged user.</span>
</span><span id="ABCPermissionMicroservice-41"><a href="#ABCPermissionMicroservice-41"><span class="linenos">41</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCPermissionMicroservice-42"><a href="#ABCPermissionMicroservice-42"><span class="linenos">42</span></a>        <span class="n">user_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCPermissionMicroservice-43"><a href="#ABCPermissionMicroservice-43"><span class="linenos">43</span></a>            <span class="n">url</span><span class="o">=</span><span class="s2">&quot;rest/registration/retrieveauthenticateduser/&quot;</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice-44"><a href="#ABCPermissionMicroservice-44"><span class="linenos">44</span></a>            <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCPermissionMicroservice-45"><a href="#ABCPermissionMicroservice-45"><span class="linenos">45</span></a>        <span class="k">return</span> <span class="n">user_info</span>
</span><span id="ABCPermissionMicroservice-46"><a href="#ABCPermissionMicroservice-46"><span class="linenos">46</span></a>
</span><span id="ABCPermissionMicroservice-47"><a href="#ABCPermissionMicroservice-47"><span class="linenos">47</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_permission</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">end_point</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice-48"><a href="#ABCPermissionMicroservice-48"><span class="linenos">48</span></a>                         <span class="n">extra_arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">allow_service_user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice-49"><a href="#ABCPermissionMicroservice-49"><span class="linenos">49</span></a>                         <span class="n">allow_external</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice-50"><a href="#ABCPermissionMicroservice-50"><span class="linenos">50</span></a>                         <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice-51"><a href="#ABCPermissionMicroservice-51"><span class="linenos">51</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get user info.</span>
</span><span id="ABCPermissionMicroservice-52"><a href="#ABCPermissionMicroservice-52"><span class="linenos">52</span></a>
</span><span id="ABCPermissionMicroservice-53"><a href="#ABCPermissionMicroservice-53"><span class="linenos">53</span></a><span class="sd">        Args:</span>
</span><span id="ABCPermissionMicroservice-54"><a href="#ABCPermissionMicroservice-54"><span class="linenos">54</span></a><span class="sd">            model_class (str):</span>
</span><span id="ABCPermissionMicroservice-55"><a href="#ABCPermissionMicroservice-55"><span class="linenos">55</span></a><span class="sd">                Model class associated to be checked for access.</span>
</span><span id="ABCPermissionMicroservice-56"><a href="#ABCPermissionMicroservice-56"><span class="linenos">56</span></a><span class="sd">            end_point (str):</span>
</span><span id="ABCPermissionMicroservice-57"><a href="#ABCPermissionMicroservice-57"><span class="linenos">57</span></a><span class="sd">                Name of the end-point that will be checked for permission. Ex.:</span>
</span><span id="ABCPermissionMicroservice-58"><a href="#ABCPermissionMicroservice-58"><span class="linenos">58</span></a><span class="sd">                retrieve, save, list, list-without-pag, ...</span>
</span><span id="ABCPermissionMicroservice-59"><a href="#ABCPermissionMicroservice-59"><span class="linenos">59</span></a><span class="sd">            extra_arg (str):</span>
</span><span id="ABCPermissionMicroservice-60"><a href="#ABCPermissionMicroservice-60"><span class="linenos">60</span></a><span class="sd">                Used on some end-points. On action end-point it is reponsible</span>
</span><span id="ABCPermissionMicroservice-61"><a href="#ABCPermissionMicroservice-61"><span class="linenos">61</span></a><span class="sd">                for setting the action associated with the call.</span>
</span><span id="ABCPermissionMicroservice-62"><a href="#ABCPermissionMicroservice-62"><span class="linenos">62</span></a><span class="sd">            allow_service_user: str = None:</span>
</span><span id="ABCPermissionMicroservice-63"><a href="#ABCPermissionMicroservice-63"><span class="linenos">63</span></a>
</span><span id="ABCPermissionMicroservice-64"><a href="#ABCPermissionMicroservice-64"><span class="linenos">64</span></a><span class="sd">            allow_external: str = None:</span>
</span><span id="ABCPermissionMicroservice-65"><a href="#ABCPermissionMicroservice-65"><span class="linenos">65</span></a>
</span><span id="ABCPermissionMicroservice-66"><a href="#ABCPermissionMicroservice-66"><span class="linenos">66</span></a><span class="sd">            auth_header (dict):</span>
</span><span id="ABCPermissionMicroservice-67"><a href="#ABCPermissionMicroservice-67"><span class="linenos">67</span></a><span class="sd">                AuthHeader to substitute the microservice original at</span>
</span><span id="ABCPermissionMicroservice-68"><a href="#ABCPermissionMicroservice-68"><span class="linenos">68</span></a><span class="sd">                request. If not passed, microservice object auth_header</span>
</span><span id="ABCPermissionMicroservice-69"><a href="#ABCPermissionMicroservice-69"><span class="linenos">69</span></a><span class="sd">                will be used.</span>
</span><span id="ABCPermissionMicroservice-70"><a href="#ABCPermissionMicroservice-70"><span class="linenos">70</span></a>
</span><span id="ABCPermissionMicroservice-71"><a href="#ABCPermissionMicroservice-71"><span class="linenos">71</span></a><span class="sd">        Returns:</span>
</span><span id="ABCPermissionMicroservice-72"><a href="#ABCPermissionMicroservice-72"><span class="linenos">72</span></a><span class="sd">            A serialized user object with information of the logged user.</span>
</span><span id="ABCPermissionMicroservice-73"><a href="#ABCPermissionMicroservice-73"><span class="linenos">73</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCPermissionMicroservice-74"><a href="#ABCPermissionMicroservice-74"><span class="linenos">74</span></a>        <span class="c1"># user_info = self.request_post(</span>
</span><span id="ABCPermissionMicroservice-75"><a href="#ABCPermissionMicroservice-75"><span class="linenos">75</span></a>        <span class="c1">#     url=&quot;rest/registration/check/&quot;,</span>
</span><span id="ABCPermissionMicroservice-76"><a href="#ABCPermissionMicroservice-76"><span class="linenos">76</span></a>        <span class="c1">#     payload={</span>
</span><span id="ABCPermissionMicroservice-77"><a href="#ABCPermissionMicroservice-77"><span class="linenos">77</span></a>        <span class="c1">#         &#39;end_point&#39;: end_point,</span>
</span><span id="ABCPermissionMicroservice-78"><a href="#ABCPermissionMicroservice-78"><span class="linenos">78</span></a>        <span class="c1">#         &#39;first_arg&#39;: first_arg,</span>
</span><span id="ABCPermissionMicroservice-79"><a href="#ABCPermissionMicroservice-79"><span class="linenos">79</span></a>        <span class="c1">#         &#39;second_arg&#39;: second_arg,</span>
</span><span id="ABCPermissionMicroservice-80"><a href="#ABCPermissionMicroservice-80"><span class="linenos">80</span></a>        <span class="c1">#         &#39;api_config_allow&#39;: api_config_allow,</span>
</span><span id="ABCPermissionMicroservice-81"><a href="#ABCPermissionMicroservice-81"><span class="linenos">81</span></a>        <span class="c1">#         &#39;api_config_deny&#39;: api_config_deny},</span>
</span><span id="ABCPermissionMicroservice-82"><a href="#ABCPermissionMicroservice-82"><span class="linenos">82</span></a>        <span class="c1">#     auth_header=auth_header, timeout=self.default_timeout)</span>
</span><span id="ABCPermissionMicroservice-83"><a href="#ABCPermissionMicroservice-83"><span class="linenos">83</span></a>        <span class="c1"># return user_info</span>
</span><span id="ABCPermissionMicroservice-84"><a href="#ABCPermissionMicroservice-84"><span class="linenos">84</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Abstract class for permission checking at pumpwood.</p>
</div>


                            <div id="ABCPermissionMicroservice.check_if_logged" class="classattr">
                                        <input id="ABCPermissionMicroservice.check_if_logged-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">check_if_logged</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="ABCPermissionMicroservice.check_if_logged-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCPermissionMicroservice.check_if_logged"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCPermissionMicroservice.check_if_logged-10"><a href="#ABCPermissionMicroservice.check_if_logged-10"><span class="linenos">10</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_if_logged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-11"><a href="#ABCPermissionMicroservice.check_if_logged-11"><span class="linenos">11</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if user is logged.</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-12"><a href="#ABCPermissionMicroservice.check_if_logged-12"><span class="linenos">12</span></a>
</span><span id="ABCPermissionMicroservice.check_if_logged-13"><a href="#ABCPermissionMicroservice.check_if_logged-13"><span class="linenos">13</span></a><span class="sd">        Args:</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-14"><a href="#ABCPermissionMicroservice.check_if_logged-14"><span class="linenos">14</span></a><span class="sd">            auth_header (dict): = None</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-15"><a href="#ABCPermissionMicroservice.check_if_logged-15"><span class="linenos">15</span></a><span class="sd">                AuthHeader to substitute the microservice original at</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-16"><a href="#ABCPermissionMicroservice.check_if_logged-16"><span class="linenos">16</span></a><span class="sd">                request. If not passed, microservice object auth_header</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-17"><a href="#ABCPermissionMicroservice.check_if_logged-17"><span class="linenos">17</span></a><span class="sd">                will be used.</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-18"><a href="#ABCPermissionMicroservice.check_if_logged-18"><span class="linenos">18</span></a>
</span><span id="ABCPermissionMicroservice.check_if_logged-19"><a href="#ABCPermissionMicroservice.check_if_logged-19"><span class="linenos">19</span></a><span class="sd">        Returns:</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-20"><a href="#ABCPermissionMicroservice.check_if_logged-20"><span class="linenos">20</span></a><span class="sd">            Return True if auth_header is looged and False if not</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-21"><a href="#ABCPermissionMicroservice.check_if_logged-21"><span class="linenos">21</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-22"><a href="#ABCPermissionMicroservice.check_if_logged-22"><span class="linenos">22</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-23"><a href="#ABCPermissionMicroservice.check_if_logged-23"><span class="linenos">23</span></a>            <span class="n">check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-24"><a href="#ABCPermissionMicroservice.check_if_logged-24"><span class="linenos">24</span></a>                <span class="n">url</span><span class="o">=</span><span class="s2">&quot;rest/registration/check/&quot;</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-25"><a href="#ABCPermissionMicroservice.check_if_logged-25"><span class="linenos">25</span></a>                <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-26"><a href="#ABCPermissionMicroservice.check_if_logged-26"><span class="linenos">26</span></a>        <span class="k">except</span> <span class="n">PumpWoodUnauthorized</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-27"><a href="#ABCPermissionMicroservice.check_if_logged-27"><span class="linenos">27</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="ABCPermissionMicroservice.check_if_logged-28"><a href="#ABCPermissionMicroservice.check_if_logged-28"><span class="linenos">28</span></a>        <span class="k">return</span> <span class="n">check</span>
</span></pre></div>


            <div class="docstring"><p>Check if user is logged.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auth_header (dict):</strong>  = None
AuthHeader to substitute the microservice original at
request. If not passed, microservice object auth_header
will be used.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return True if auth_header is looged and False if not</p>
</blockquote>
</div>


                            </div>
                            <div id="ABCPermissionMicroservice.get_user_info" class="classattr">
                                        <input id="ABCPermissionMicroservice.get_user_info-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_user_info</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="ABCPermissionMicroservice.get_user_info-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCPermissionMicroservice.get_user_info"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCPermissionMicroservice.get_user_info-30"><a href="#ABCPermissionMicroservice.get_user_info-30"><span class="linenos">30</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice.get_user_info-31"><a href="#ABCPermissionMicroservice.get_user_info-31"><span class="linenos">31</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get user info.</span>
</span><span id="ABCPermissionMicroservice.get_user_info-32"><a href="#ABCPermissionMicroservice.get_user_info-32"><span class="linenos">32</span></a>
</span><span id="ABCPermissionMicroservice.get_user_info-33"><a href="#ABCPermissionMicroservice.get_user_info-33"><span class="linenos">33</span></a><span class="sd">        Args:</span>
</span><span id="ABCPermissionMicroservice.get_user_info-34"><a href="#ABCPermissionMicroservice.get_user_info-34"><span class="linenos">34</span></a><span class="sd">            auth_header (dict): = None</span>
</span><span id="ABCPermissionMicroservice.get_user_info-35"><a href="#ABCPermissionMicroservice.get_user_info-35"><span class="linenos">35</span></a><span class="sd">                AuthHeader to substitute the microservice original at</span>
</span><span id="ABCPermissionMicroservice.get_user_info-36"><a href="#ABCPermissionMicroservice.get_user_info-36"><span class="linenos">36</span></a><span class="sd">                request. If not passed, microservice object auth_header</span>
</span><span id="ABCPermissionMicroservice.get_user_info-37"><a href="#ABCPermissionMicroservice.get_user_info-37"><span class="linenos">37</span></a><span class="sd">                will be used.</span>
</span><span id="ABCPermissionMicroservice.get_user_info-38"><a href="#ABCPermissionMicroservice.get_user_info-38"><span class="linenos">38</span></a>
</span><span id="ABCPermissionMicroservice.get_user_info-39"><a href="#ABCPermissionMicroservice.get_user_info-39"><span class="linenos">39</span></a><span class="sd">        Returns:</span>
</span><span id="ABCPermissionMicroservice.get_user_info-40"><a href="#ABCPermissionMicroservice.get_user_info-40"><span class="linenos">40</span></a><span class="sd">            A serialized user object with information of the logged user.</span>
</span><span id="ABCPermissionMicroservice.get_user_info-41"><a href="#ABCPermissionMicroservice.get_user_info-41"><span class="linenos">41</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCPermissionMicroservice.get_user_info-42"><a href="#ABCPermissionMicroservice.get_user_info-42"><span class="linenos">42</span></a>        <span class="n">user_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCPermissionMicroservice.get_user_info-43"><a href="#ABCPermissionMicroservice.get_user_info-43"><span class="linenos">43</span></a>            <span class="n">url</span><span class="o">=</span><span class="s2">&quot;rest/registration/retrieveauthenticateduser/&quot;</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice.get_user_info-44"><a href="#ABCPermissionMicroservice.get_user_info-44"><span class="linenos">44</span></a>            <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCPermissionMicroservice.get_user_info-45"><a href="#ABCPermissionMicroservice.get_user_info-45"><span class="linenos">45</span></a>        <span class="k">return</span> <span class="n">user_info</span>
</span></pre></div>


            <div class="docstring"><p>Get user info.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auth_header (dict):</strong>  = None
AuthHeader to substitute the microservice original at
request. If not passed, microservice object auth_header
will be used.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>A serialized user object with information of the logged user.</p>
</blockquote>
</div>


                            </div>
                            <div id="ABCPermissionMicroservice.check_permission" class="classattr">
                                        <input id="ABCPermissionMicroservice.check_permission-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">check_permission</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">end_point</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">extra_arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">allow_service_user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">allow_external</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="ABCPermissionMicroservice.check_permission-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCPermissionMicroservice.check_permission"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCPermissionMicroservice.check_permission-47"><a href="#ABCPermissionMicroservice.check_permission-47"><span class="linenos">47</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_permission</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">end_point</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice.check_permission-48"><a href="#ABCPermissionMicroservice.check_permission-48"><span class="linenos">48</span></a>                         <span class="n">extra_arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">allow_service_user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice.check_permission-49"><a href="#ABCPermissionMicroservice.check_permission-49"><span class="linenos">49</span></a>                         <span class="n">allow_external</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCPermissionMicroservice.check_permission-50"><a href="#ABCPermissionMicroservice.check_permission-50"><span class="linenos">50</span></a>                         <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ABCPermissionMicroservice.check_permission-51"><a href="#ABCPermissionMicroservice.check_permission-51"><span class="linenos">51</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get user info.</span>
</span><span id="ABCPermissionMicroservice.check_permission-52"><a href="#ABCPermissionMicroservice.check_permission-52"><span class="linenos">52</span></a>
</span><span id="ABCPermissionMicroservice.check_permission-53"><a href="#ABCPermissionMicroservice.check_permission-53"><span class="linenos">53</span></a><span class="sd">        Args:</span>
</span><span id="ABCPermissionMicroservice.check_permission-54"><a href="#ABCPermissionMicroservice.check_permission-54"><span class="linenos">54</span></a><span class="sd">            model_class (str):</span>
</span><span id="ABCPermissionMicroservice.check_permission-55"><a href="#ABCPermissionMicroservice.check_permission-55"><span class="linenos">55</span></a><span class="sd">                Model class associated to be checked for access.</span>
</span><span id="ABCPermissionMicroservice.check_permission-56"><a href="#ABCPermissionMicroservice.check_permission-56"><span class="linenos">56</span></a><span class="sd">            end_point (str):</span>
</span><span id="ABCPermissionMicroservice.check_permission-57"><a href="#ABCPermissionMicroservice.check_permission-57"><span class="linenos">57</span></a><span class="sd">                Name of the end-point that will be checked for permission. Ex.:</span>
</span><span id="ABCPermissionMicroservice.check_permission-58"><a href="#ABCPermissionMicroservice.check_permission-58"><span class="linenos">58</span></a><span class="sd">                retrieve, save, list, list-without-pag, ...</span>
</span><span id="ABCPermissionMicroservice.check_permission-59"><a href="#ABCPermissionMicroservice.check_permission-59"><span class="linenos">59</span></a><span class="sd">            extra_arg (str):</span>
</span><span id="ABCPermissionMicroservice.check_permission-60"><a href="#ABCPermissionMicroservice.check_permission-60"><span class="linenos">60</span></a><span class="sd">                Used on some end-points. On action end-point it is reponsible</span>
</span><span id="ABCPermissionMicroservice.check_permission-61"><a href="#ABCPermissionMicroservice.check_permission-61"><span class="linenos">61</span></a><span class="sd">                for setting the action associated with the call.</span>
</span><span id="ABCPermissionMicroservice.check_permission-62"><a href="#ABCPermissionMicroservice.check_permission-62"><span class="linenos">62</span></a><span class="sd">            allow_service_user: str = None:</span>
</span><span id="ABCPermissionMicroservice.check_permission-63"><a href="#ABCPermissionMicroservice.check_permission-63"><span class="linenos">63</span></a>
</span><span id="ABCPermissionMicroservice.check_permission-64"><a href="#ABCPermissionMicroservice.check_permission-64"><span class="linenos">64</span></a><span class="sd">            allow_external: str = None:</span>
</span><span id="ABCPermissionMicroservice.check_permission-65"><a href="#ABCPermissionMicroservice.check_permission-65"><span class="linenos">65</span></a>
</span><span id="ABCPermissionMicroservice.check_permission-66"><a href="#ABCPermissionMicroservice.check_permission-66"><span class="linenos">66</span></a><span class="sd">            auth_header (dict):</span>
</span><span id="ABCPermissionMicroservice.check_permission-67"><a href="#ABCPermissionMicroservice.check_permission-67"><span class="linenos">67</span></a><span class="sd">                AuthHeader to substitute the microservice original at</span>
</span><span id="ABCPermissionMicroservice.check_permission-68"><a href="#ABCPermissionMicroservice.check_permission-68"><span class="linenos">68</span></a><span class="sd">                request. If not passed, microservice object auth_header</span>
</span><span id="ABCPermissionMicroservice.check_permission-69"><a href="#ABCPermissionMicroservice.check_permission-69"><span class="linenos">69</span></a><span class="sd">                will be used.</span>
</span><span id="ABCPermissionMicroservice.check_permission-70"><a href="#ABCPermissionMicroservice.check_permission-70"><span class="linenos">70</span></a>
</span><span id="ABCPermissionMicroservice.check_permission-71"><a href="#ABCPermissionMicroservice.check_permission-71"><span class="linenos">71</span></a><span class="sd">        Returns:</span>
</span><span id="ABCPermissionMicroservice.check_permission-72"><a href="#ABCPermissionMicroservice.check_permission-72"><span class="linenos">72</span></a><span class="sd">            A serialized user object with information of the logged user.</span>
</span><span id="ABCPermissionMicroservice.check_permission-73"><a href="#ABCPermissionMicroservice.check_permission-73"><span class="linenos">73</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCPermissionMicroservice.check_permission-74"><a href="#ABCPermissionMicroservice.check_permission-74"><span class="linenos">74</span></a>        <span class="c1"># user_info = self.request_post(</span>
</span><span id="ABCPermissionMicroservice.check_permission-75"><a href="#ABCPermissionMicroservice.check_permission-75"><span class="linenos">75</span></a>        <span class="c1">#     url=&quot;rest/registration/check/&quot;,</span>
</span><span id="ABCPermissionMicroservice.check_permission-76"><a href="#ABCPermissionMicroservice.check_permission-76"><span class="linenos">76</span></a>        <span class="c1">#     payload={</span>
</span><span id="ABCPermissionMicroservice.check_permission-77"><a href="#ABCPermissionMicroservice.check_permission-77"><span class="linenos">77</span></a>        <span class="c1">#         &#39;end_point&#39;: end_point,</span>
</span><span id="ABCPermissionMicroservice.check_permission-78"><a href="#ABCPermissionMicroservice.check_permission-78"><span class="linenos">78</span></a>        <span class="c1">#         &#39;first_arg&#39;: first_arg,</span>
</span><span id="ABCPermissionMicroservice.check_permission-79"><a href="#ABCPermissionMicroservice.check_permission-79"><span class="linenos">79</span></a>        <span class="c1">#         &#39;second_arg&#39;: second_arg,</span>
</span><span id="ABCPermissionMicroservice.check_permission-80"><a href="#ABCPermissionMicroservice.check_permission-80"><span class="linenos">80</span></a>        <span class="c1">#         &#39;api_config_allow&#39;: api_config_allow,</span>
</span><span id="ABCPermissionMicroservice.check_permission-81"><a href="#ABCPermissionMicroservice.check_permission-81"><span class="linenos">81</span></a>        <span class="c1">#         &#39;api_config_deny&#39;: api_config_deny},</span>
</span><span id="ABCPermissionMicroservice.check_permission-82"><a href="#ABCPermissionMicroservice.check_permission-82"><span class="linenos">82</span></a>        <span class="c1">#     auth_header=auth_header, timeout=self.default_timeout)</span>
</span><span id="ABCPermissionMicroservice.check_permission-83"><a href="#ABCPermissionMicroservice.check_permission-83"><span class="linenos">83</span></a>        <span class="c1"># return user_info</span>
</span><span id="ABCPermissionMicroservice.check_permission-84"><a href="#ABCPermissionMicroservice.check_permission-84"><span class="linenos">84</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Get user info.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class (str):</strong>  Model class associated to be checked for access.</li>
<li><strong>end_point (str):</strong>  Name of the end-point that will be checked for permission. Ex.:
retrieve, save, list, list-without-pag, ...</li>
<li><strong>extra_arg (str):</strong>  Used on some end-points. On action end-point it is reponsible
for setting the action associated with the call.</li>
<li><strong>allow_service_user:</strong>  str = None:</li>
<li><strong>allow_external:</strong>  str = None:</li>
<li><strong>auth_header (dict):</strong>  AuthHeader to substitute the microservice original at
request. If not passed, microservice object auth_header
will be used.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>A serialized user object with information of the logged user.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="ABCSimpleRetriveMicroservice">
                            <input id="ABCSimpleRetriveMicroservice-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ABCSimpleRetriveMicroservice</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="ABCSimpleRetriveMicroservice-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleRetriveMicroservice"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleRetriveMicroservice-10"><a href="#ABCSimpleRetriveMicroservice-10"><span class="linenos"> 10</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ABCSimpleRetriveMicroservice</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-11"><a href="#ABCSimpleRetriveMicroservice-11"><span class="linenos"> 11</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract class for parallel calls at Pumpwood end-points.&quot;&quot;&quot;</span>
</span><span id="ABCSimpleRetriveMicroservice-12"><a href="#ABCSimpleRetriveMicroservice-12"><span class="linenos"> 12</span></a>
</span><span id="ABCSimpleRetriveMicroservice-13"><a href="#ABCSimpleRetriveMicroservice-13"><span class="linenos"> 13</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ABCSimpleRetriveMicroservice-14"><a href="#ABCSimpleRetriveMicroservice-14"><span class="linenos"> 14</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_list_one_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-15"><a href="#ABCSimpleRetriveMicroservice-15"><span class="linenos"> 15</span></a>        <span class="k">return</span> <span class="s2">&quot;rest/</span><span class="si">%s</span><span class="s2">/retrieve/</span><span class="si">%s</span><span class="s2">/&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-16"><a href="#ABCSimpleRetriveMicroservice-16"><span class="linenos"> 16</span></a>
</span><span id="ABCSimpleRetriveMicroservice-17"><a href="#ABCSimpleRetriveMicroservice-17"><span class="linenos"> 17</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">list_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-18"><a href="#ABCSimpleRetriveMicroservice-18"><span class="linenos"> 18</span></a>                 <span class="n">default_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">foreign_key_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-19"><a href="#ABCSimpleRetriveMicroservice-19"><span class="linenos"> 19</span></a>                 <span class="n">related_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-20"><a href="#ABCSimpleRetriveMicroservice-20"><span class="linenos"> 20</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve an object using list serializer (simple).</span>
</span><span id="ABCSimpleRetriveMicroservice-21"><a href="#ABCSimpleRetriveMicroservice-21"><span class="linenos"> 21</span></a>
</span><span id="ABCSimpleRetriveMicroservice-22"><a href="#ABCSimpleRetriveMicroservice-22"><span class="linenos"> 22</span></a><span class="sd">        **# DEPRECTED #** It is the same as retrieve using</span>
</span><span id="ABCSimpleRetriveMicroservice-23"><a href="#ABCSimpleRetriveMicroservice-23"><span class="linenos"> 23</span></a><span class="sd">        `default_fields: bool = True`, if possible migrate to retrieve</span>
</span><span id="ABCSimpleRetriveMicroservice-24"><a href="#ABCSimpleRetriveMicroservice-24"><span class="linenos"> 24</span></a><span class="sd">        function.</span>
</span><span id="ABCSimpleRetriveMicroservice-25"><a href="#ABCSimpleRetriveMicroservice-25"><span class="linenos"> 25</span></a>
</span><span id="ABCSimpleRetriveMicroservice-26"><a href="#ABCSimpleRetriveMicroservice-26"><span class="linenos"> 26</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleRetriveMicroservice-27"><a href="#ABCSimpleRetriveMicroservice-27"><span class="linenos"> 27</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleRetriveMicroservice-28"><a href="#ABCSimpleRetriveMicroservice-28"><span class="linenos"> 28</span></a><span class="sd">                Model class of the end-point</span>
</span><span id="ABCSimpleRetriveMicroservice-29"><a href="#ABCSimpleRetriveMicroservice-29"><span class="linenos"> 29</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleRetriveMicroservice-30"><a href="#ABCSimpleRetriveMicroservice-30"><span class="linenos"> 30</span></a><span class="sd">                Object pk</span>
</span><span id="ABCSimpleRetriveMicroservice-31"><a href="#ABCSimpleRetriveMicroservice-31"><span class="linenos"> 31</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice-32"><a href="#ABCSimpleRetriveMicroservice-32"><span class="linenos"> 32</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleRetriveMicroservice-33"><a href="#ABCSimpleRetriveMicroservice-33"><span class="linenos"> 33</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleRetriveMicroservice-34"><a href="#ABCSimpleRetriveMicroservice-34"><span class="linenos"> 34</span></a><span class="sd">            fields:</span>
</span><span id="ABCSimpleRetriveMicroservice-35"><a href="#ABCSimpleRetriveMicroservice-35"><span class="linenos"> 35</span></a><span class="sd">                Set the fields to be returned by the list end-point.</span>
</span><span id="ABCSimpleRetriveMicroservice-36"><a href="#ABCSimpleRetriveMicroservice-36"><span class="linenos"> 36</span></a><span class="sd">            default_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice-37"><a href="#ABCSimpleRetriveMicroservice-37"><span class="linenos"> 37</span></a><span class="sd">                Boolean, if true and fields arguments None will return the</span>
</span><span id="ABCSimpleRetriveMicroservice-38"><a href="#ABCSimpleRetriveMicroservice-38"><span class="linenos"> 38</span></a><span class="sd">                default fields set for list by the backend.</span>
</span><span id="ABCSimpleRetriveMicroservice-39"><a href="#ABCSimpleRetriveMicroservice-39"><span class="linenos"> 39</span></a><span class="sd">            foreign_key_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice-40"><a href="#ABCSimpleRetriveMicroservice-40"><span class="linenos"> 40</span></a><span class="sd">                Return forenging key objects. It will return the fk</span>
</span><span id="ABCSimpleRetriveMicroservice-41"><a href="#ABCSimpleRetriveMicroservice-41"><span class="linenos"> 41</span></a><span class="sd">                corresponding object. Ex: `created_by_id` reference to</span>
</span><span id="ABCSimpleRetriveMicroservice-42"><a href="#ABCSimpleRetriveMicroservice-42"><span class="linenos"> 42</span></a><span class="sd">                a user `model_class` the correspondent to User will be</span>
</span><span id="ABCSimpleRetriveMicroservice-43"><a href="#ABCSimpleRetriveMicroservice-43"><span class="linenos"> 43</span></a><span class="sd">                returned at `created_by`.</span>
</span><span id="ABCSimpleRetriveMicroservice-44"><a href="#ABCSimpleRetriveMicroservice-44"><span class="linenos"> 44</span></a><span class="sd">            related_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice-45"><a href="#ABCSimpleRetriveMicroservice-45"><span class="linenos"> 45</span></a><span class="sd">                Return related fields objects. Related field objects are</span>
</span><span id="ABCSimpleRetriveMicroservice-46"><a href="#ABCSimpleRetriveMicroservice-46"><span class="linenos"> 46</span></a><span class="sd">                objects that have a forenging key associated with this</span>
</span><span id="ABCSimpleRetriveMicroservice-47"><a href="#ABCSimpleRetriveMicroservice-47"><span class="linenos"> 47</span></a><span class="sd">                model_class, results will be returned as a list of</span>
</span><span id="ABCSimpleRetriveMicroservice-48"><a href="#ABCSimpleRetriveMicroservice-48"><span class="linenos"> 48</span></a><span class="sd">                dictionaries usually in a field with `_set` at end.</span>
</span><span id="ABCSimpleRetriveMicroservice-49"><a href="#ABCSimpleRetriveMicroservice-49"><span class="linenos"> 49</span></a><span class="sd">                Returning related_fields consume backend resorces, use</span>
</span><span id="ABCSimpleRetriveMicroservice-50"><a href="#ABCSimpleRetriveMicroservice-50"><span class="linenos"> 50</span></a><span class="sd">                carefully.</span>
</span><span id="ABCSimpleRetriveMicroservice-51"><a href="#ABCSimpleRetriveMicroservice-51"><span class="linenos"> 51</span></a>
</span><span id="ABCSimpleRetriveMicroservice-52"><a href="#ABCSimpleRetriveMicroservice-52"><span class="linenos"> 52</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleRetriveMicroservice-53"><a href="#ABCSimpleRetriveMicroservice-53"><span class="linenos"> 53</span></a><span class="sd">            Return object with the correspondent pk.</span>
</span><span id="ABCSimpleRetriveMicroservice-54"><a href="#ABCSimpleRetriveMicroservice-54"><span class="linenos"> 54</span></a>
</span><span id="ABCSimpleRetriveMicroservice-55"><a href="#ABCSimpleRetriveMicroservice-55"><span class="linenos"> 55</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleRetriveMicroservice-56"><a href="#ABCSimpleRetriveMicroservice-56"><span class="linenos"> 56</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice-57"><a href="#ABCSimpleRetriveMicroservice-57"><span class="linenos"> 57</span></a><span class="sd">                If pk not found on database.</span>
</span><span id="ABCSimpleRetriveMicroservice-58"><a href="#ABCSimpleRetriveMicroservice-58"><span class="linenos"> 58</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleRetriveMicroservice-59"><a href="#ABCSimpleRetriveMicroservice-59"><span class="linenos"> 59</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_list_one_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-60"><a href="#ABCSimpleRetriveMicroservice-60"><span class="linenos"> 60</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-61"><a href="#ABCSimpleRetriveMicroservice-61"><span class="linenos"> 61</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="ABCSimpleRetriveMicroservice-62"><a href="#ABCSimpleRetriveMicroservice-62"><span class="linenos"> 62</span></a>                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;default_fields&quot;</span><span class="p">:</span> <span class="n">default_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-63"><a href="#ABCSimpleRetriveMicroservice-63"><span class="linenos"> 63</span></a>                <span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">:</span> <span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-64"><a href="#ABCSimpleRetriveMicroservice-64"><span class="linenos"> 64</span></a>                <span class="s2">&quot;related_fields&quot;</span><span class="p">:</span> <span class="n">related_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-65"><a href="#ABCSimpleRetriveMicroservice-65"><span class="linenos"> 65</span></a>            <span class="p">},</span> <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-66"><a href="#ABCSimpleRetriveMicroservice-66"><span class="linenos"> 66</span></a>
</span><span id="ABCSimpleRetriveMicroservice-67"><a href="#ABCSimpleRetriveMicroservice-67"><span class="linenos"> 67</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ABCSimpleRetriveMicroservice-68"><a href="#ABCSimpleRetriveMicroservice-68"><span class="linenos"> 68</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_retrieve_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-69"><a href="#ABCSimpleRetriveMicroservice-69"><span class="linenos"> 69</span></a>        <span class="k">return</span> <span class="s2">&quot;rest/</span><span class="si">%s</span><span class="s2">/retrieve/</span><span class="si">%s</span><span class="s2">/&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-70"><a href="#ABCSimpleRetriveMicroservice-70"><span class="linenos"> 70</span></a>
</span><span id="ABCSimpleRetriveMicroservice-71"><a href="#ABCSimpleRetriveMicroservice-71"><span class="linenos"> 71</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-72"><a href="#ABCSimpleRetriveMicroservice-72"><span class="linenos"> 72</span></a>                 <span class="n">default_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-73"><a href="#ABCSimpleRetriveMicroservice-73"><span class="linenos"> 73</span></a>                 <span class="n">foreign_key_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-74"><a href="#ABCSimpleRetriveMicroservice-74"><span class="linenos"> 74</span></a>                 <span class="n">related_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-75"><a href="#ABCSimpleRetriveMicroservice-75"><span class="linenos"> 75</span></a>                 <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-76"><a href="#ABCSimpleRetriveMicroservice-76"><span class="linenos"> 76</span></a>                 <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-77"><a href="#ABCSimpleRetriveMicroservice-77"><span class="linenos"> 77</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve an object from PumpWood.</span>
</span><span id="ABCSimpleRetriveMicroservice-78"><a href="#ABCSimpleRetriveMicroservice-78"><span class="linenos"> 78</span></a>
</span><span id="ABCSimpleRetriveMicroservice-79"><a href="#ABCSimpleRetriveMicroservice-79"><span class="linenos"> 79</span></a><span class="sd">        Function to get object serialized by retrieve end-point</span>
</span><span id="ABCSimpleRetriveMicroservice-80"><a href="#ABCSimpleRetriveMicroservice-80"><span class="linenos"> 80</span></a><span class="sd">        (more detailed data).</span>
</span><span id="ABCSimpleRetriveMicroservice-81"><a href="#ABCSimpleRetriveMicroservice-81"><span class="linenos"> 81</span></a>
</span><span id="ABCSimpleRetriveMicroservice-82"><a href="#ABCSimpleRetriveMicroservice-82"><span class="linenos"> 82</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleRetriveMicroservice-83"><a href="#ABCSimpleRetriveMicroservice-83"><span class="linenos"> 83</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleRetriveMicroservice-84"><a href="#ABCSimpleRetriveMicroservice-84"><span class="linenos"> 84</span></a><span class="sd">                Model class of the end-point</span>
</span><span id="ABCSimpleRetriveMicroservice-85"><a href="#ABCSimpleRetriveMicroservice-85"><span class="linenos"> 85</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleRetriveMicroservice-86"><a href="#ABCSimpleRetriveMicroservice-86"><span class="linenos"> 86</span></a><span class="sd">                Object pk</span>
</span><span id="ABCSimpleRetriveMicroservice-87"><a href="#ABCSimpleRetriveMicroservice-87"><span class="linenos"> 87</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice-88"><a href="#ABCSimpleRetriveMicroservice-88"><span class="linenos"> 88</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleRetriveMicroservice-89"><a href="#ABCSimpleRetriveMicroservice-89"><span class="linenos"> 89</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleRetriveMicroservice-90"><a href="#ABCSimpleRetriveMicroservice-90"><span class="linenos"> 90</span></a><span class="sd">            fields:</span>
</span><span id="ABCSimpleRetriveMicroservice-91"><a href="#ABCSimpleRetriveMicroservice-91"><span class="linenos"> 91</span></a><span class="sd">                Set the fields to be returned by the list end-point.</span>
</span><span id="ABCSimpleRetriveMicroservice-92"><a href="#ABCSimpleRetriveMicroservice-92"><span class="linenos"> 92</span></a><span class="sd">            default_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice-93"><a href="#ABCSimpleRetriveMicroservice-93"><span class="linenos"> 93</span></a><span class="sd">                Boolean, if true and fields arguments None will return the</span>
</span><span id="ABCSimpleRetriveMicroservice-94"><a href="#ABCSimpleRetriveMicroservice-94"><span class="linenos"> 94</span></a><span class="sd">                default fields set for list by the backend.</span>
</span><span id="ABCSimpleRetriveMicroservice-95"><a href="#ABCSimpleRetriveMicroservice-95"><span class="linenos"> 95</span></a><span class="sd">            foreign_key_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice-96"><a href="#ABCSimpleRetriveMicroservice-96"><span class="linenos"> 96</span></a><span class="sd">                Return forenging key objects. It will return the fk</span>
</span><span id="ABCSimpleRetriveMicroservice-97"><a href="#ABCSimpleRetriveMicroservice-97"><span class="linenos"> 97</span></a><span class="sd">                corresponding object. Ex: `created_by_id` reference to</span>
</span><span id="ABCSimpleRetriveMicroservice-98"><a href="#ABCSimpleRetriveMicroservice-98"><span class="linenos"> 98</span></a><span class="sd">                a user `model_class` the correspondent to User will be</span>
</span><span id="ABCSimpleRetriveMicroservice-99"><a href="#ABCSimpleRetriveMicroservice-99"><span class="linenos"> 99</span></a><span class="sd">                returned at `created_by`.</span>
</span><span id="ABCSimpleRetriveMicroservice-100"><a href="#ABCSimpleRetriveMicroservice-100"><span class="linenos">100</span></a><span class="sd">            related_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice-101"><a href="#ABCSimpleRetriveMicroservice-101"><span class="linenos">101</span></a><span class="sd">                Return related fields objects. Related field objects are</span>
</span><span id="ABCSimpleRetriveMicroservice-102"><a href="#ABCSimpleRetriveMicroservice-102"><span class="linenos">102</span></a><span class="sd">                objects that have a forenging key associated with this</span>
</span><span id="ABCSimpleRetriveMicroservice-103"><a href="#ABCSimpleRetriveMicroservice-103"><span class="linenos">103</span></a><span class="sd">                model_class, results will be returned as a list of</span>
</span><span id="ABCSimpleRetriveMicroservice-104"><a href="#ABCSimpleRetriveMicroservice-104"><span class="linenos">104</span></a><span class="sd">                dictionaries usually in a field with `_set` at end.</span>
</span><span id="ABCSimpleRetriveMicroservice-105"><a href="#ABCSimpleRetriveMicroservice-105"><span class="linenos">105</span></a><span class="sd">                Returning related_fields consume backend resorces, use</span>
</span><span id="ABCSimpleRetriveMicroservice-106"><a href="#ABCSimpleRetriveMicroservice-106"><span class="linenos">106</span></a><span class="sd">                carefully.</span>
</span><span id="ABCSimpleRetriveMicroservice-107"><a href="#ABCSimpleRetriveMicroservice-107"><span class="linenos">107</span></a>
</span><span id="ABCSimpleRetriveMicroservice-108"><a href="#ABCSimpleRetriveMicroservice-108"><span class="linenos">108</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleRetriveMicroservice-109"><a href="#ABCSimpleRetriveMicroservice-109"><span class="linenos">109</span></a><span class="sd">            Return object with the correspondent pk.</span>
</span><span id="ABCSimpleRetriveMicroservice-110"><a href="#ABCSimpleRetriveMicroservice-110"><span class="linenos">110</span></a>
</span><span id="ABCSimpleRetriveMicroservice-111"><a href="#ABCSimpleRetriveMicroservice-111"><span class="linenos">111</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleRetriveMicroservice-112"><a href="#ABCSimpleRetriveMicroservice-112"><span class="linenos">112</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice-113"><a href="#ABCSimpleRetriveMicroservice-113"><span class="linenos">113</span></a><span class="sd">                If pk not found on database.</span>
</span><span id="ABCSimpleRetriveMicroservice-114"><a href="#ABCSimpleRetriveMicroservice-114"><span class="linenos">114</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleRetriveMicroservice-115"><a href="#ABCSimpleRetriveMicroservice-115"><span class="linenos">115</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_retrieve_url</span><span class="p">(</span><span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-116"><a href="#ABCSimpleRetriveMicroservice-116"><span class="linenos">116</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-117"><a href="#ABCSimpleRetriveMicroservice-117"><span class="linenos">117</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="ABCSimpleRetriveMicroservice-118"><a href="#ABCSimpleRetriveMicroservice-118"><span class="linenos">118</span></a>                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;default_fields&quot;</span><span class="p">:</span> <span class="n">default_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-119"><a href="#ABCSimpleRetriveMicroservice-119"><span class="linenos">119</span></a>                <span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">:</span> <span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-120"><a href="#ABCSimpleRetriveMicroservice-120"><span class="linenos">120</span></a>                <span class="s2">&quot;related_fields&quot;</span><span class="p">:</span> <span class="n">related_fields</span><span class="p">},</span>
</span><span id="ABCSimpleRetriveMicroservice-121"><a href="#ABCSimpleRetriveMicroservice-121"><span class="linenos">121</span></a>            <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-122"><a href="#ABCSimpleRetriveMicroservice-122"><span class="linenos">122</span></a>
</span><span id="ABCSimpleRetriveMicroservice-123"><a href="#ABCSimpleRetriveMicroservice-123"><span class="linenos">123</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ABCSimpleRetriveMicroservice-124"><a href="#ABCSimpleRetriveMicroservice-124"><span class="linenos">124</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_retrieve_file_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-125"><a href="#ABCSimpleRetriveMicroservice-125"><span class="linenos">125</span></a>        <span class="k">return</span> <span class="s2">&quot;rest/</span><span class="si">%s</span><span class="s2">/retrieve-file/</span><span class="si">%s</span><span class="s2">/&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-126"><a href="#ABCSimpleRetriveMicroservice-126"><span class="linenos">126</span></a>
</span><span id="ABCSimpleRetriveMicroservice-127"><a href="#ABCSimpleRetriveMicroservice-127"><span class="linenos">127</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">retrieve_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-128"><a href="#ABCSimpleRetriveMicroservice-128"><span class="linenos">128</span></a>                      <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">save_file</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-129"><a href="#ABCSimpleRetriveMicroservice-129"><span class="linenos">129</span></a>                      <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-130"><a href="#ABCSimpleRetriveMicroservice-130"><span class="linenos">130</span></a>                      <span class="n">if_exists</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">any</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-131"><a href="#ABCSimpleRetriveMicroservice-131"><span class="linenos">131</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a file from PumpWood.</span>
</span><span id="ABCSimpleRetriveMicroservice-132"><a href="#ABCSimpleRetriveMicroservice-132"><span class="linenos">132</span></a>
</span><span id="ABCSimpleRetriveMicroservice-133"><a href="#ABCSimpleRetriveMicroservice-133"><span class="linenos">133</span></a><span class="sd">        This function will retrieve file as a single request, depending on the</span>
</span><span id="ABCSimpleRetriveMicroservice-134"><a href="#ABCSimpleRetriveMicroservice-134"><span class="linenos">134</span></a><span class="sd">        size of the files it would be preferred to use streaming end-point.</span>
</span><span id="ABCSimpleRetriveMicroservice-135"><a href="#ABCSimpleRetriveMicroservice-135"><span class="linenos">135</span></a>
</span><span id="ABCSimpleRetriveMicroservice-136"><a href="#ABCSimpleRetriveMicroservice-136"><span class="linenos">136</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleRetriveMicroservice-137"><a href="#ABCSimpleRetriveMicroservice-137"><span class="linenos">137</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleRetriveMicroservice-138"><a href="#ABCSimpleRetriveMicroservice-138"><span class="linenos">138</span></a><span class="sd">                Class of the model to retrieve file.</span>
</span><span id="ABCSimpleRetriveMicroservice-139"><a href="#ABCSimpleRetriveMicroservice-139"><span class="linenos">139</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleRetriveMicroservice-140"><a href="#ABCSimpleRetriveMicroservice-140"><span class="linenos">140</span></a><span class="sd">                Pk of the object associeted file.</span>
</span><span id="ABCSimpleRetriveMicroservice-141"><a href="#ABCSimpleRetriveMicroservice-141"><span class="linenos">141</span></a><span class="sd">            file_field:</span>
</span><span id="ABCSimpleRetriveMicroservice-142"><a href="#ABCSimpleRetriveMicroservice-142"><span class="linenos">142</span></a><span class="sd">                Field of the file to be downloaded.</span>
</span><span id="ABCSimpleRetriveMicroservice-143"><a href="#ABCSimpleRetriveMicroservice-143"><span class="linenos">143</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice-144"><a href="#ABCSimpleRetriveMicroservice-144"><span class="linenos">144</span></a><span class="sd">                Dictionary containing the auth header.</span>
</span><span id="ABCSimpleRetriveMicroservice-145"><a href="#ABCSimpleRetriveMicroservice-145"><span class="linenos">145</span></a><span class="sd">            save_file:</span>
</span><span id="ABCSimpleRetriveMicroservice-146"><a href="#ABCSimpleRetriveMicroservice-146"><span class="linenos">146</span></a><span class="sd">                If data is to be saved as file or return get</span>
</span><span id="ABCSimpleRetriveMicroservice-147"><a href="#ABCSimpleRetriveMicroservice-147"><span class="linenos">147</span></a><span class="sd">                response.</span>
</span><span id="ABCSimpleRetriveMicroservice-148"><a href="#ABCSimpleRetriveMicroservice-148"><span class="linenos">148</span></a><span class="sd">            save_path:</span>
</span><span id="ABCSimpleRetriveMicroservice-149"><a href="#ABCSimpleRetriveMicroservice-149"><span class="linenos">149</span></a><span class="sd">                Path of the directory to save file.</span>
</span><span id="ABCSimpleRetriveMicroservice-150"><a href="#ABCSimpleRetriveMicroservice-150"><span class="linenos">150</span></a><span class="sd">            file_name:</span>
</span><span id="ABCSimpleRetriveMicroservice-151"><a href="#ABCSimpleRetriveMicroservice-151"><span class="linenos">151</span></a><span class="sd">                Name of the file, if None it will have same name as</span>
</span><span id="ABCSimpleRetriveMicroservice-152"><a href="#ABCSimpleRetriveMicroservice-152"><span class="linenos">152</span></a><span class="sd">                saved in PumpWood.</span>
</span><span id="ABCSimpleRetriveMicroservice-153"><a href="#ABCSimpleRetriveMicroservice-153"><span class="linenos">153</span></a><span class="sd">            if_exists:</span>
</span><span id="ABCSimpleRetriveMicroservice-154"><a href="#ABCSimpleRetriveMicroservice-154"><span class="linenos">154</span></a><span class="sd">                Values must be in {&#39;fail&#39;, &#39;change_name&#39;, &#39;overwrite&#39;, &#39;skip&#39;}.</span>
</span><span id="ABCSimpleRetriveMicroservice-155"><a href="#ABCSimpleRetriveMicroservice-155"><span class="linenos">155</span></a><span class="sd">                Set what to do if there is a file with same name. Skip</span>
</span><span id="ABCSimpleRetriveMicroservice-156"><a href="#ABCSimpleRetriveMicroservice-156"><span class="linenos">156</span></a><span class="sd">                will not download file if there is already with same</span>
</span><span id="ABCSimpleRetriveMicroservice-157"><a href="#ABCSimpleRetriveMicroservice-157"><span class="linenos">157</span></a><span class="sd">                os.path.join(save_path, file_name), file_name must be set</span>
</span><span id="ABCSimpleRetriveMicroservice-158"><a href="#ABCSimpleRetriveMicroservice-158"><span class="linenos">158</span></a><span class="sd">                for skip argument.</span>
</span><span id="ABCSimpleRetriveMicroservice-159"><a href="#ABCSimpleRetriveMicroservice-159"><span class="linenos">159</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice-160"><a href="#ABCSimpleRetriveMicroservice-160"><span class="linenos">160</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleRetriveMicroservice-161"><a href="#ABCSimpleRetriveMicroservice-161"><span class="linenos">161</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleRetriveMicroservice-162"><a href="#ABCSimpleRetriveMicroservice-162"><span class="linenos">162</span></a>
</span><span id="ABCSimpleRetriveMicroservice-163"><a href="#ABCSimpleRetriveMicroservice-163"><span class="linenos">163</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleRetriveMicroservice-164"><a href="#ABCSimpleRetriveMicroservice-164"><span class="linenos">164</span></a><span class="sd">            May return the file name if save_file=True; If false will return</span>
</span><span id="ABCSimpleRetriveMicroservice-165"><a href="#ABCSimpleRetriveMicroservice-165"><span class="linenos">165</span></a><span class="sd">            a dictonary with keys `filename` with original file name and</span>
</span><span id="ABCSimpleRetriveMicroservice-166"><a href="#ABCSimpleRetriveMicroservice-166"><span class="linenos">166</span></a><span class="sd">            `content` with binary data of file content.</span>
</span><span id="ABCSimpleRetriveMicroservice-167"><a href="#ABCSimpleRetriveMicroservice-167"><span class="linenos">167</span></a>
</span><span id="ABCSimpleRetriveMicroservice-168"><a href="#ABCSimpleRetriveMicroservice-168"><span class="linenos">168</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleRetriveMicroservice-169"><a href="#ABCSimpleRetriveMicroservice-169"><span class="linenos">169</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleRetriveMicroservice-170"><a href="#ABCSimpleRetriveMicroservice-170"><span class="linenos">170</span></a><span class="sd">                &#39;storage_object attribute not set for view, file operations</span>
</span><span id="ABCSimpleRetriveMicroservice-171"><a href="#ABCSimpleRetriveMicroservice-171"><span class="linenos">171</span></a><span class="sd">                are disable&#39;. This indicates that storage for this backend</span>
</span><span id="ABCSimpleRetriveMicroservice-172"><a href="#ABCSimpleRetriveMicroservice-172"><span class="linenos">172</span></a><span class="sd">                was not configured, so it is not possible to make storage</span>
</span><span id="ABCSimpleRetriveMicroservice-173"><a href="#ABCSimpleRetriveMicroservice-173"><span class="linenos">173</span></a><span class="sd">                operations,</span>
</span><span id="ABCSimpleRetriveMicroservice-174"><a href="#ABCSimpleRetriveMicroservice-174"><span class="linenos">174</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleRetriveMicroservice-175"><a href="#ABCSimpleRetriveMicroservice-175"><span class="linenos">175</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary&#39;. This</span>
</span><span id="ABCSimpleRetriveMicroservice-176"><a href="#ABCSimpleRetriveMicroservice-176"><span class="linenos">176</span></a><span class="sd">                indicates that the `file_field` parameter is not listed as</span>
</span><span id="ABCSimpleRetriveMicroservice-177"><a href="#ABCSimpleRetriveMicroservice-177"><span class="linenos">177</span></a><span class="sd">                a file field on the backend.</span>
</span><span id="ABCSimpleRetriveMicroservice-178"><a href="#ABCSimpleRetriveMicroservice-178"><span class="linenos">178</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice-179"><a href="#ABCSimpleRetriveMicroservice-179"><span class="linenos">179</span></a><span class="sd">                &#39;field [{}] not found or null at object&#39;. This indicates that</span>
</span><span id="ABCSimpleRetriveMicroservice-180"><a href="#ABCSimpleRetriveMicroservice-180"><span class="linenos">180</span></a><span class="sd">                the file field requested is not present on object fields.</span>
</span><span id="ABCSimpleRetriveMicroservice-181"><a href="#ABCSimpleRetriveMicroservice-181"><span class="linenos">181</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice-182"><a href="#ABCSimpleRetriveMicroservice-182"><span class="linenos">182</span></a><span class="sd">                &#39;Object not found in storage [{}]&#39;. This indicates that the</span>
</span><span id="ABCSimpleRetriveMicroservice-183"><a href="#ABCSimpleRetriveMicroservice-183"><span class="linenos">183</span></a><span class="sd">                file associated with file_field is not avaiable at the</span>
</span><span id="ABCSimpleRetriveMicroservice-184"><a href="#ABCSimpleRetriveMicroservice-184"><span class="linenos">184</span></a><span class="sd">                storage. This should not ocorrur, it might have a manual</span>
</span><span id="ABCSimpleRetriveMicroservice-185"><a href="#ABCSimpleRetriveMicroservice-185"><span class="linenos">185</span></a><span class="sd">                update at the model_class table or manual removal/rename of</span>
</span><span id="ABCSimpleRetriveMicroservice-186"><a href="#ABCSimpleRetriveMicroservice-186"><span class="linenos">186</span></a><span class="sd">                files on storage.</span>
</span><span id="ABCSimpleRetriveMicroservice-187"><a href="#ABCSimpleRetriveMicroservice-187"><span class="linenos">187</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleRetriveMicroservice-188"><a href="#ABCSimpleRetriveMicroservice-188"><span class="linenos">188</span></a>        <span class="k">if</span> <span class="n">if_exists</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;fail&quot;</span><span class="p">,</span> <span class="s2">&quot;change_name&quot;</span><span class="p">,</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">,</span> <span class="s2">&quot;skip&quot;</span><span class="p">]:</span>
</span><span id="ABCSimpleRetriveMicroservice-189"><a href="#ABCSimpleRetriveMicroservice-189"><span class="linenos">189</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-190"><a href="#ABCSimpleRetriveMicroservice-190"><span class="linenos">190</span></a>                <span class="s2">&quot;if_exists must be in [&#39;fail&#39;, &#39;change_name&#39;, &#39;overwrite&#39;, &quot;</span>
</span><span id="ABCSimpleRetriveMicroservice-191"><a href="#ABCSimpleRetriveMicroservice-191"><span class="linenos">191</span></a>                <span class="s2">&quot;&#39;skip&#39;]&quot;</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-192"><a href="#ABCSimpleRetriveMicroservice-192"><span class="linenos">192</span></a>
</span><span id="ABCSimpleRetriveMicroservice-193"><a href="#ABCSimpleRetriveMicroservice-193"><span class="linenos">193</span></a>        <span class="k">if</span> <span class="n">file_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s1">&#39;skip&#39;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-194"><a href="#ABCSimpleRetriveMicroservice-194"><span class="linenos">194</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-195"><a href="#ABCSimpleRetriveMicroservice-195"><span class="linenos">195</span></a>            <span class="n">is_file_already</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-196"><a href="#ABCSimpleRetriveMicroservice-196"><span class="linenos">196</span></a>            <span class="k">if</span> <span class="n">is_file_already</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-197"><a href="#ABCSimpleRetriveMicroservice-197"><span class="linenos">197</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;skiping file already exists: &quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-198"><a href="#ABCSimpleRetriveMicroservice-198"><span class="linenos">198</span></a>                <span class="k">return</span> <span class="n">file_path</span>
</span><span id="ABCSimpleRetriveMicroservice-199"><a href="#ABCSimpleRetriveMicroservice-199"><span class="linenos">199</span></a>
</span><span id="ABCSimpleRetriveMicroservice-200"><a href="#ABCSimpleRetriveMicroservice-200"><span class="linenos">200</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_retrieve_file_url</span><span class="p">(</span><span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-201"><a href="#ABCSimpleRetriveMicroservice-201"><span class="linenos">201</span></a>        <span class="n">file_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-202"><a href="#ABCSimpleRetriveMicroservice-202"><span class="linenos">202</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file-field&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">},</span>
</span><span id="ABCSimpleRetriveMicroservice-203"><a href="#ABCSimpleRetriveMicroservice-203"><span class="linenos">203</span></a>            <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-204"><a href="#ABCSimpleRetriveMicroservice-204"><span class="linenos">204</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_file</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-205"><a href="#ABCSimpleRetriveMicroservice-205"><span class="linenos">205</span></a>            <span class="k">return</span> <span class="n">file_response</span>
</span><span id="ABCSimpleRetriveMicroservice-206"><a href="#ABCSimpleRetriveMicroservice-206"><span class="linenos">206</span></a>
</span><span id="ABCSimpleRetriveMicroservice-207"><a href="#ABCSimpleRetriveMicroservice-207"><span class="linenos">207</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">save_path</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-208"><a href="#ABCSimpleRetriveMicroservice-208"><span class="linenos">208</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-209"><a href="#ABCSimpleRetriveMicroservice-209"><span class="linenos">209</span></a>                <span class="s2">&quot;Path to save retrieved file [</span><span class="si">{}</span><span class="s2">] does not exist&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-210"><a href="#ABCSimpleRetriveMicroservice-210"><span class="linenos">210</span></a>                    <span class="n">save_path</span><span class="p">))</span>
</span><span id="ABCSimpleRetriveMicroservice-211"><a href="#ABCSimpleRetriveMicroservice-211"><span class="linenos">211</span></a>
</span><span id="ABCSimpleRetriveMicroservice-212"><a href="#ABCSimpleRetriveMicroservice-212"><span class="linenos">212</span></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">secure_filename</span><span class="p">(</span><span class="n">file_name</span> <span class="ow">or</span> <span class="n">file_response</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">])</span>
</span><span id="ABCSimpleRetriveMicroservice-213"><a href="#ABCSimpleRetriveMicroservice-213"><span class="linenos">213</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-214"><a href="#ABCSimpleRetriveMicroservice-214"><span class="linenos">214</span></a>        <span class="n">is_file_already</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-215"><a href="#ABCSimpleRetriveMicroservice-215"><span class="linenos">215</span></a>        <span class="k">if</span> <span class="n">is_file_already</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-216"><a href="#ABCSimpleRetriveMicroservice-216"><span class="linenos">216</span></a>            <span class="k">if</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s2">&quot;change_name&quot;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-217"><a href="#ABCSimpleRetriveMicroservice-217"><span class="linenos">217</span></a>                <span class="n">filename</span><span class="p">,</span> <span class="n">file_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-218"><a href="#ABCSimpleRetriveMicroservice-218"><span class="linenos">218</span></a>                <span class="n">too_many_tries</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ABCSimpleRetriveMicroservice-219"><a href="#ABCSimpleRetriveMicroservice-219"><span class="linenos">219</span></a>                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-220"><a href="#ABCSimpleRetriveMicroservice-220"><span class="linenos">220</span></a>                    <span class="n">new_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{filename}</span><span class="s2">__</span><span class="si">{count}{extension}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-221"><a href="#ABCSimpleRetriveMicroservice-221"><span class="linenos">221</span></a>                        <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-222"><a href="#ABCSimpleRetriveMicroservice-222"><span class="linenos">222</span></a>                        <span class="n">extension</span><span class="o">=</span><span class="n">file_extension</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-223"><a href="#ABCSimpleRetriveMicroservice-223"><span class="linenos">223</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">new_path</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-224"><a href="#ABCSimpleRetriveMicroservice-224"><span class="linenos">224</span></a>                        <span class="n">file_path</span> <span class="o">=</span> <span class="n">new_path</span>
</span><span id="ABCSimpleRetriveMicroservice-225"><a href="#ABCSimpleRetriveMicroservice-225"><span class="linenos">225</span></a>                        <span class="n">too_many_tries</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ABCSimpleRetriveMicroservice-226"><a href="#ABCSimpleRetriveMicroservice-226"><span class="linenos">226</span></a>                        <span class="k">break</span>
</span><span id="ABCSimpleRetriveMicroservice-227"><a href="#ABCSimpleRetriveMicroservice-227"><span class="linenos">227</span></a>                <span class="k">if</span> <span class="n">too_many_tries</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-228"><a href="#ABCSimpleRetriveMicroservice-228"><span class="linenos">228</span></a>                    <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-229"><a href="#ABCSimpleRetriveMicroservice-229"><span class="linenos">229</span></a>                        <span class="p">(</span><span class="s2">&quot;Too many tries to find a not used file name.&quot;</span> <span class="o">+</span>
</span><span id="ABCSimpleRetriveMicroservice-230"><a href="#ABCSimpleRetriveMicroservice-230"><span class="linenos">230</span></a>                         <span class="s2">&quot; file_path[</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">)))</span>
</span><span id="ABCSimpleRetriveMicroservice-231"><a href="#ABCSimpleRetriveMicroservice-231"><span class="linenos">231</span></a>
</span><span id="ABCSimpleRetriveMicroservice-232"><a href="#ABCSimpleRetriveMicroservice-232"><span class="linenos">232</span></a>            <span class="k">elif</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s2">&quot;fail&quot;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-233"><a href="#ABCSimpleRetriveMicroservice-233"><span class="linenos">233</span></a>                <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-234"><a href="#ABCSimpleRetriveMicroservice-234"><span class="linenos">234</span></a>                    <span class="p">(</span><span class="s2">&quot;if_exists set as &#39;fail&#39; and there is a file with same&quot;</span> <span class="o">+</span>
</span><span id="ABCSimpleRetriveMicroservice-235"><a href="#ABCSimpleRetriveMicroservice-235"><span class="linenos">235</span></a>                     <span class="s2">&quot;name. file_path [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
</span><span id="ABCSimpleRetriveMicroservice-236"><a href="#ABCSimpleRetriveMicroservice-236"><span class="linenos">236</span></a>
</span><span id="ABCSimpleRetriveMicroservice-237"><a href="#ABCSimpleRetriveMicroservice-237"><span class="linenos">237</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-238"><a href="#ABCSimpleRetriveMicroservice-238"><span class="linenos">238</span></a>            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_response</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>
</span><span id="ABCSimpleRetriveMicroservice-239"><a href="#ABCSimpleRetriveMicroservice-239"><span class="linenos">239</span></a>        <span class="k">return</span> <span class="n">file_path</span>
</span><span id="ABCSimpleRetriveMicroservice-240"><a href="#ABCSimpleRetriveMicroservice-240"><span class="linenos">240</span></a>
</span><span id="ABCSimpleRetriveMicroservice-241"><a href="#ABCSimpleRetriveMicroservice-241"><span class="linenos">241</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ABCSimpleRetriveMicroservice-242"><a href="#ABCSimpleRetriveMicroservice-242"><span class="linenos">242</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_retrieve_file_straming_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-243"><a href="#ABCSimpleRetriveMicroservice-243"><span class="linenos">243</span></a>        <span class="k">return</span> <span class="s2">&quot;rest/</span><span class="si">%s</span><span class="s2">/retrieve-file-streaming/</span><span class="si">%s</span><span class="s2">/&quot;</span> <span class="o">%</span> <span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-244"><a href="#ABCSimpleRetriveMicroservice-244"><span class="linenos">244</span></a>            <span class="n">model_class</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-245"><a href="#ABCSimpleRetriveMicroservice-245"><span class="linenos">245</span></a>
</span><span id="ABCSimpleRetriveMicroservice-246"><a href="#ABCSimpleRetriveMicroservice-246"><span class="linenos">246</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">retrieve_streaming_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-247"><a href="#ABCSimpleRetriveMicroservice-247"><span class="linenos">247</span></a>                                <span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-248"><a href="#ABCSimpleRetriveMicroservice-248"><span class="linenos">248</span></a>                                <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-249"><a href="#ABCSimpleRetriveMicroservice-249"><span class="linenos">249</span></a>                                <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-250"><a href="#ABCSimpleRetriveMicroservice-250"><span class="linenos">250</span></a>                                <span class="n">if_exists</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-251"><a href="#ABCSimpleRetriveMicroservice-251"><span class="linenos">251</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a file from PumpWood using streaming to retrieve content.</span>
</span><span id="ABCSimpleRetriveMicroservice-252"><a href="#ABCSimpleRetriveMicroservice-252"><span class="linenos">252</span></a>
</span><span id="ABCSimpleRetriveMicroservice-253"><a href="#ABCSimpleRetriveMicroservice-253"><span class="linenos">253</span></a><span class="sd">        This funcion uses file streaming to retrieve file content, it should be</span>
</span><span id="ABCSimpleRetriveMicroservice-254"><a href="#ABCSimpleRetriveMicroservice-254"><span class="linenos">254</span></a><span class="sd">        prefered when dealing with large (bigger than 10Mb) files transfer.</span>
</span><span id="ABCSimpleRetriveMicroservice-255"><a href="#ABCSimpleRetriveMicroservice-255"><span class="linenos">255</span></a><span class="sd">        Using this end-point the file is not loaded on backend memory content</span>
</span><span id="ABCSimpleRetriveMicroservice-256"><a href="#ABCSimpleRetriveMicroservice-256"><span class="linenos">256</span></a><span class="sd">        is transfered by chucks that are read at the storage and transfered</span>
</span><span id="ABCSimpleRetriveMicroservice-257"><a href="#ABCSimpleRetriveMicroservice-257"><span class="linenos">257</span></a><span class="sd">        to user.</span>
</span><span id="ABCSimpleRetriveMicroservice-258"><a href="#ABCSimpleRetriveMicroservice-258"><span class="linenos">258</span></a>
</span><span id="ABCSimpleRetriveMicroservice-259"><a href="#ABCSimpleRetriveMicroservice-259"><span class="linenos">259</span></a><span class="sd">        It will necessarily save the content as a file, there is not the</span>
</span><span id="ABCSimpleRetriveMicroservice-260"><a href="#ABCSimpleRetriveMicroservice-260"><span class="linenos">260</span></a><span class="sd">        possibility of retrieving the content directly from request.</span>
</span><span id="ABCSimpleRetriveMicroservice-261"><a href="#ABCSimpleRetriveMicroservice-261"><span class="linenos">261</span></a>
</span><span id="ABCSimpleRetriveMicroservice-262"><a href="#ABCSimpleRetriveMicroservice-262"><span class="linenos">262</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleRetriveMicroservice-263"><a href="#ABCSimpleRetriveMicroservice-263"><span class="linenos">263</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleRetriveMicroservice-264"><a href="#ABCSimpleRetriveMicroservice-264"><span class="linenos">264</span></a><span class="sd">                Class of the model to retrieve file.</span>
</span><span id="ABCSimpleRetriveMicroservice-265"><a href="#ABCSimpleRetriveMicroservice-265"><span class="linenos">265</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleRetriveMicroservice-266"><a href="#ABCSimpleRetriveMicroservice-266"><span class="linenos">266</span></a><span class="sd">                Pk of the object associeted file.</span>
</span><span id="ABCSimpleRetriveMicroservice-267"><a href="#ABCSimpleRetriveMicroservice-267"><span class="linenos">267</span></a><span class="sd">            file_field:</span>
</span><span id="ABCSimpleRetriveMicroservice-268"><a href="#ABCSimpleRetriveMicroservice-268"><span class="linenos">268</span></a><span class="sd">                Field of the file to be downloaded.</span>
</span><span id="ABCSimpleRetriveMicroservice-269"><a href="#ABCSimpleRetriveMicroservice-269"><span class="linenos">269</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice-270"><a href="#ABCSimpleRetriveMicroservice-270"><span class="linenos">270</span></a><span class="sd">                Dictionary containing the auth header.</span>
</span><span id="ABCSimpleRetriveMicroservice-271"><a href="#ABCSimpleRetriveMicroservice-271"><span class="linenos">271</span></a><span class="sd">            save_path:</span>
</span><span id="ABCSimpleRetriveMicroservice-272"><a href="#ABCSimpleRetriveMicroservice-272"><span class="linenos">272</span></a><span class="sd">                Path of the directory to save file.</span>
</span><span id="ABCSimpleRetriveMicroservice-273"><a href="#ABCSimpleRetriveMicroservice-273"><span class="linenos">273</span></a><span class="sd">            file_name:</span>
</span><span id="ABCSimpleRetriveMicroservice-274"><a href="#ABCSimpleRetriveMicroservice-274"><span class="linenos">274</span></a><span class="sd">                Name of the file, if None it will have same name as</span>
</span><span id="ABCSimpleRetriveMicroservice-275"><a href="#ABCSimpleRetriveMicroservice-275"><span class="linenos">275</span></a><span class="sd">                saved in PumpWood.</span>
</span><span id="ABCSimpleRetriveMicroservice-276"><a href="#ABCSimpleRetriveMicroservice-276"><span class="linenos">276</span></a><span class="sd">            if_exists:</span>
</span><span id="ABCSimpleRetriveMicroservice-277"><a href="#ABCSimpleRetriveMicroservice-277"><span class="linenos">277</span></a><span class="sd">                Values must be in {&#39;fail&#39;, &#39;change_name&#39;, &#39;overwrite&#39;}.</span>
</span><span id="ABCSimpleRetriveMicroservice-278"><a href="#ABCSimpleRetriveMicroservice-278"><span class="linenos">278</span></a><span class="sd">                Set what to do if there is a file with same name.</span>
</span><span id="ABCSimpleRetriveMicroservice-279"><a href="#ABCSimpleRetriveMicroservice-279"><span class="linenos">279</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice-280"><a href="#ABCSimpleRetriveMicroservice-280"><span class="linenos">280</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleRetriveMicroservice-281"><a href="#ABCSimpleRetriveMicroservice-281"><span class="linenos">281</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleRetriveMicroservice-282"><a href="#ABCSimpleRetriveMicroservice-282"><span class="linenos">282</span></a>
</span><span id="ABCSimpleRetriveMicroservice-283"><a href="#ABCSimpleRetriveMicroservice-283"><span class="linenos">283</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleRetriveMicroservice-284"><a href="#ABCSimpleRetriveMicroservice-284"><span class="linenos">284</span></a><span class="sd">            Returns the file path that recived the file content.</span>
</span><span id="ABCSimpleRetriveMicroservice-285"><a href="#ABCSimpleRetriveMicroservice-285"><span class="linenos">285</span></a>
</span><span id="ABCSimpleRetriveMicroservice-286"><a href="#ABCSimpleRetriveMicroservice-286"><span class="linenos">286</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleRetriveMicroservice-287"><a href="#ABCSimpleRetriveMicroservice-287"><span class="linenos">287</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleRetriveMicroservice-288"><a href="#ABCSimpleRetriveMicroservice-288"><span class="linenos">288</span></a><span class="sd">                &#39;storage_object attribute not set for view, file operations</span>
</span><span id="ABCSimpleRetriveMicroservice-289"><a href="#ABCSimpleRetriveMicroservice-289"><span class="linenos">289</span></a><span class="sd">                are disable&#39;. This indicates that storage for this backend</span>
</span><span id="ABCSimpleRetriveMicroservice-290"><a href="#ABCSimpleRetriveMicroservice-290"><span class="linenos">290</span></a><span class="sd">                was not configured, so it is not possible to make storage</span>
</span><span id="ABCSimpleRetriveMicroservice-291"><a href="#ABCSimpleRetriveMicroservice-291"><span class="linenos">291</span></a><span class="sd">                operations,</span>
</span><span id="ABCSimpleRetriveMicroservice-292"><a href="#ABCSimpleRetriveMicroservice-292"><span class="linenos">292</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleRetriveMicroservice-293"><a href="#ABCSimpleRetriveMicroservice-293"><span class="linenos">293</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary&#39;. This</span>
</span><span id="ABCSimpleRetriveMicroservice-294"><a href="#ABCSimpleRetriveMicroservice-294"><span class="linenos">294</span></a><span class="sd">                indicates that the `file_field` parameter is not listed as</span>
</span><span id="ABCSimpleRetriveMicroservice-295"><a href="#ABCSimpleRetriveMicroservice-295"><span class="linenos">295</span></a><span class="sd">                a file field on the backend.</span>
</span><span id="ABCSimpleRetriveMicroservice-296"><a href="#ABCSimpleRetriveMicroservice-296"><span class="linenos">296</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice-297"><a href="#ABCSimpleRetriveMicroservice-297"><span class="linenos">297</span></a><span class="sd">                &#39;field [{}] not found or null at object&#39;. This indicates that</span>
</span><span id="ABCSimpleRetriveMicroservice-298"><a href="#ABCSimpleRetriveMicroservice-298"><span class="linenos">298</span></a><span class="sd">                the file field requested is not present on object fields.</span>
</span><span id="ABCSimpleRetriveMicroservice-299"><a href="#ABCSimpleRetriveMicroservice-299"><span class="linenos">299</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice-300"><a href="#ABCSimpleRetriveMicroservice-300"><span class="linenos">300</span></a><span class="sd">                &#39;Object not found in storage [{}]&#39;. This indicates that the</span>
</span><span id="ABCSimpleRetriveMicroservice-301"><a href="#ABCSimpleRetriveMicroservice-301"><span class="linenos">301</span></a><span class="sd">                file associated with file_field is not avaiable at the</span>
</span><span id="ABCSimpleRetriveMicroservice-302"><a href="#ABCSimpleRetriveMicroservice-302"><span class="linenos">302</span></a><span class="sd">                storage. This should not ocorrur, it might have a manual</span>
</span><span id="ABCSimpleRetriveMicroservice-303"><a href="#ABCSimpleRetriveMicroservice-303"><span class="linenos">303</span></a><span class="sd">                update at the model_class table or manual removal/rename of</span>
</span><span id="ABCSimpleRetriveMicroservice-304"><a href="#ABCSimpleRetriveMicroservice-304"><span class="linenos">304</span></a><span class="sd">                files on storage.</span>
</span><span id="ABCSimpleRetriveMicroservice-305"><a href="#ABCSimpleRetriveMicroservice-305"><span class="linenos">305</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleRetriveMicroservice-306"><a href="#ABCSimpleRetriveMicroservice-306"><span class="linenos">306</span></a>        <span class="n">request_header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check__auth_header</span><span class="p">(</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-307"><a href="#ABCSimpleRetriveMicroservice-307"><span class="linenos">307</span></a>
</span><span id="ABCSimpleRetriveMicroservice-308"><a href="#ABCSimpleRetriveMicroservice-308"><span class="linenos">308</span></a>        <span class="c1"># begin Args check</span>
</span><span id="ABCSimpleRetriveMicroservice-309"><a href="#ABCSimpleRetriveMicroservice-309"><span class="linenos">309</span></a>        <span class="k">if</span> <span class="n">if_exists</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;fail&quot;</span><span class="p">,</span> <span class="s2">&quot;change_name&quot;</span><span class="p">,</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">]:</span>
</span><span id="ABCSimpleRetriveMicroservice-310"><a href="#ABCSimpleRetriveMicroservice-310"><span class="linenos">310</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-311"><a href="#ABCSimpleRetriveMicroservice-311"><span class="linenos">311</span></a>                <span class="s2">&quot;if_exists must be in [&#39;fail&#39;, &#39;change_name&#39;, &#39;overwrite&#39;]&quot;</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-312"><a href="#ABCSimpleRetriveMicroservice-312"><span class="linenos">312</span></a>
</span><span id="ABCSimpleRetriveMicroservice-313"><a href="#ABCSimpleRetriveMicroservice-313"><span class="linenos">313</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">save_path</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-314"><a href="#ABCSimpleRetriveMicroservice-314"><span class="linenos">314</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-315"><a href="#ABCSimpleRetriveMicroservice-315"><span class="linenos">315</span></a>                <span class="s2">&quot;Path to save retrieved file [</span><span class="si">{}</span><span class="s2">] does not exist&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-316"><a href="#ABCSimpleRetriveMicroservice-316"><span class="linenos">316</span></a>                    <span class="n">save_path</span><span class="p">))</span>
</span><span id="ABCSimpleRetriveMicroservice-317"><a href="#ABCSimpleRetriveMicroservice-317"><span class="linenos">317</span></a>        <span class="c1"># end Args check</span>
</span><span id="ABCSimpleRetriveMicroservice-318"><a href="#ABCSimpleRetriveMicroservice-318"><span class="linenos">318</span></a>
</span><span id="ABCSimpleRetriveMicroservice-319"><a href="#ABCSimpleRetriveMicroservice-319"><span class="linenos">319</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-320"><a href="#ABCSimpleRetriveMicroservice-320"><span class="linenos">320</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s2">&quot;change_name&quot;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-321"><a href="#ABCSimpleRetriveMicroservice-321"><span class="linenos">321</span></a>            <span class="n">filename</span><span class="p">,</span> <span class="n">file_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-322"><a href="#ABCSimpleRetriveMicroservice-322"><span class="linenos">322</span></a>            <span class="n">too_many_tries</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ABCSimpleRetriveMicroservice-323"><a href="#ABCSimpleRetriveMicroservice-323"><span class="linenos">323</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-324"><a href="#ABCSimpleRetriveMicroservice-324"><span class="linenos">324</span></a>                <span class="n">new_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{filename}</span><span class="s2">__</span><span class="si">{count}{extension}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-325"><a href="#ABCSimpleRetriveMicroservice-325"><span class="linenos">325</span></a>                    <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-326"><a href="#ABCSimpleRetriveMicroservice-326"><span class="linenos">326</span></a>                    <span class="n">extension</span><span class="o">=</span><span class="n">file_extension</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-327"><a href="#ABCSimpleRetriveMicroservice-327"><span class="linenos">327</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">new_path</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-328"><a href="#ABCSimpleRetriveMicroservice-328"><span class="linenos">328</span></a>                    <span class="n">file_path</span> <span class="o">=</span> <span class="n">new_path</span>
</span><span id="ABCSimpleRetriveMicroservice-329"><a href="#ABCSimpleRetriveMicroservice-329"><span class="linenos">329</span></a>                    <span class="n">too_many_tries</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ABCSimpleRetriveMicroservice-330"><a href="#ABCSimpleRetriveMicroservice-330"><span class="linenos">330</span></a>                    <span class="k">break</span>
</span><span id="ABCSimpleRetriveMicroservice-331"><a href="#ABCSimpleRetriveMicroservice-331"><span class="linenos">331</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">too_many_tries</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-332"><a href="#ABCSimpleRetriveMicroservice-332"><span class="linenos">332</span></a>                <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-333"><a href="#ABCSimpleRetriveMicroservice-333"><span class="linenos">333</span></a>                    <span class="p">(</span><span class="s2">&quot;Too many tries to find a not used file name.&quot;</span> <span class="o">+</span>
</span><span id="ABCSimpleRetriveMicroservice-334"><a href="#ABCSimpleRetriveMicroservice-334"><span class="linenos">334</span></a>                     <span class="s2">&quot; file_path[</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">)))</span>
</span><span id="ABCSimpleRetriveMicroservice-335"><a href="#ABCSimpleRetriveMicroservice-335"><span class="linenos">335</span></a>
</span><span id="ABCSimpleRetriveMicroservice-336"><a href="#ABCSimpleRetriveMicroservice-336"><span class="linenos">336</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s2">&quot;fail&quot;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-337"><a href="#ABCSimpleRetriveMicroservice-337"><span class="linenos">337</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-338"><a href="#ABCSimpleRetriveMicroservice-338"><span class="linenos">338</span></a>                <span class="p">(</span><span class="s2">&quot;if_exists set as &#39;fail&#39; and there is a file with same&quot;</span> <span class="o">+</span>
</span><span id="ABCSimpleRetriveMicroservice-339"><a href="#ABCSimpleRetriveMicroservice-339"><span class="linenos">339</span></a>                 <span class="s2">&quot;name. file_path [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
</span><span id="ABCSimpleRetriveMicroservice-340"><a href="#ABCSimpleRetriveMicroservice-340"><span class="linenos">340</span></a>
</span><span id="ABCSimpleRetriveMicroservice-341"><a href="#ABCSimpleRetriveMicroservice-341"><span class="linenos">341</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_retrieve_file_straming_url</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-342"><a href="#ABCSimpleRetriveMicroservice-342"><span class="linenos">342</span></a>            <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-343"><a href="#ABCSimpleRetriveMicroservice-343"><span class="linenos">343</span></a>
</span><span id="ABCSimpleRetriveMicroservice-344"><a href="#ABCSimpleRetriveMicroservice-344"><span class="linenos">344</span></a>        <span class="n">get_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_url</span> <span class="o">+</span> <span class="n">url_str</span>
</span><span id="ABCSimpleRetriveMicroservice-345"><a href="#ABCSimpleRetriveMicroservice-345"><span class="linenos">345</span></a>        <span class="k">with</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice-346"><a href="#ABCSimpleRetriveMicroservice-346"><span class="linenos">346</span></a>                <span class="n">get_url</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">request_header</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice-347"><a href="#ABCSimpleRetriveMicroservice-347"><span class="linenos">347</span></a>                <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file-field&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">},</span>
</span><span id="ABCSimpleRetriveMicroservice-348"><a href="#ABCSimpleRetriveMicroservice-348"><span class="linenos">348</span></a>                <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default_timeout</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-349"><a href="#ABCSimpleRetriveMicroservice-349"><span class="linenos">349</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">error_handler</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-350"><a href="#ABCSimpleRetriveMicroservice-350"><span class="linenos">350</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-351"><a href="#ABCSimpleRetriveMicroservice-351"><span class="linenos">351</span></a>                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">8192</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice-352"><a href="#ABCSimpleRetriveMicroservice-352"><span class="linenos">352</span></a>                    <span class="k">if</span> <span class="n">chunk</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice-353"><a href="#ABCSimpleRetriveMicroservice-353"><span class="linenos">353</span></a>                        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice-354"><a href="#ABCSimpleRetriveMicroservice-354"><span class="linenos">354</span></a>        <span class="k">return</span> <span class="n">file_path</span>
</span></pre></div>


            <div class="docstring"><p>Abstract class for parallel calls at Pumpwood end-points.</p>
</div>


                            <div id="ABCSimpleRetriveMicroservice.list_one" class="classattr">
                                        <input id="ABCSimpleRetriveMicroservice.list_one-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list_one</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">pk</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">default_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">foreign_key_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">related_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ABCSimpleRetriveMicroservice.list_one-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleRetriveMicroservice.list_one"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleRetriveMicroservice.list_one-17"><a href="#ABCSimpleRetriveMicroservice.list_one-17"><span class="linenos">17</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">list_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-18"><a href="#ABCSimpleRetriveMicroservice.list_one-18"><span class="linenos">18</span></a>                 <span class="n">default_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">foreign_key_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-19"><a href="#ABCSimpleRetriveMicroservice.list_one-19"><span class="linenos">19</span></a>                 <span class="n">related_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-20"><a href="#ABCSimpleRetriveMicroservice.list_one-20"><span class="linenos">20</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve an object using list serializer (simple).</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-21"><a href="#ABCSimpleRetriveMicroservice.list_one-21"><span class="linenos">21</span></a>
</span><span id="ABCSimpleRetriveMicroservice.list_one-22"><a href="#ABCSimpleRetriveMicroservice.list_one-22"><span class="linenos">22</span></a><span class="sd">        **# DEPRECTED #** It is the same as retrieve using</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-23"><a href="#ABCSimpleRetriveMicroservice.list_one-23"><span class="linenos">23</span></a><span class="sd">        `default_fields: bool = True`, if possible migrate to retrieve</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-24"><a href="#ABCSimpleRetriveMicroservice.list_one-24"><span class="linenos">24</span></a><span class="sd">        function.</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-25"><a href="#ABCSimpleRetriveMicroservice.list_one-25"><span class="linenos">25</span></a>
</span><span id="ABCSimpleRetriveMicroservice.list_one-26"><a href="#ABCSimpleRetriveMicroservice.list_one-26"><span class="linenos">26</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-27"><a href="#ABCSimpleRetriveMicroservice.list_one-27"><span class="linenos">27</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-28"><a href="#ABCSimpleRetriveMicroservice.list_one-28"><span class="linenos">28</span></a><span class="sd">                Model class of the end-point</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-29"><a href="#ABCSimpleRetriveMicroservice.list_one-29"><span class="linenos">29</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-30"><a href="#ABCSimpleRetriveMicroservice.list_one-30"><span class="linenos">30</span></a><span class="sd">                Object pk</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-31"><a href="#ABCSimpleRetriveMicroservice.list_one-31"><span class="linenos">31</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-32"><a href="#ABCSimpleRetriveMicroservice.list_one-32"><span class="linenos">32</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-33"><a href="#ABCSimpleRetriveMicroservice.list_one-33"><span class="linenos">33</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-34"><a href="#ABCSimpleRetriveMicroservice.list_one-34"><span class="linenos">34</span></a><span class="sd">            fields:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-35"><a href="#ABCSimpleRetriveMicroservice.list_one-35"><span class="linenos">35</span></a><span class="sd">                Set the fields to be returned by the list end-point.</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-36"><a href="#ABCSimpleRetriveMicroservice.list_one-36"><span class="linenos">36</span></a><span class="sd">            default_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-37"><a href="#ABCSimpleRetriveMicroservice.list_one-37"><span class="linenos">37</span></a><span class="sd">                Boolean, if true and fields arguments None will return the</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-38"><a href="#ABCSimpleRetriveMicroservice.list_one-38"><span class="linenos">38</span></a><span class="sd">                default fields set for list by the backend.</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-39"><a href="#ABCSimpleRetriveMicroservice.list_one-39"><span class="linenos">39</span></a><span class="sd">            foreign_key_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-40"><a href="#ABCSimpleRetriveMicroservice.list_one-40"><span class="linenos">40</span></a><span class="sd">                Return forenging key objects. It will return the fk</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-41"><a href="#ABCSimpleRetriveMicroservice.list_one-41"><span class="linenos">41</span></a><span class="sd">                corresponding object. Ex: `created_by_id` reference to</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-42"><a href="#ABCSimpleRetriveMicroservice.list_one-42"><span class="linenos">42</span></a><span class="sd">                a user `model_class` the correspondent to User will be</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-43"><a href="#ABCSimpleRetriveMicroservice.list_one-43"><span class="linenos">43</span></a><span class="sd">                returned at `created_by`.</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-44"><a href="#ABCSimpleRetriveMicroservice.list_one-44"><span class="linenos">44</span></a><span class="sd">            related_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-45"><a href="#ABCSimpleRetriveMicroservice.list_one-45"><span class="linenos">45</span></a><span class="sd">                Return related fields objects. Related field objects are</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-46"><a href="#ABCSimpleRetriveMicroservice.list_one-46"><span class="linenos">46</span></a><span class="sd">                objects that have a forenging key associated with this</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-47"><a href="#ABCSimpleRetriveMicroservice.list_one-47"><span class="linenos">47</span></a><span class="sd">                model_class, results will be returned as a list of</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-48"><a href="#ABCSimpleRetriveMicroservice.list_one-48"><span class="linenos">48</span></a><span class="sd">                dictionaries usually in a field with `_set` at end.</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-49"><a href="#ABCSimpleRetriveMicroservice.list_one-49"><span class="linenos">49</span></a><span class="sd">                Returning related_fields consume backend resorces, use</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-50"><a href="#ABCSimpleRetriveMicroservice.list_one-50"><span class="linenos">50</span></a><span class="sd">                carefully.</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-51"><a href="#ABCSimpleRetriveMicroservice.list_one-51"><span class="linenos">51</span></a>
</span><span id="ABCSimpleRetriveMicroservice.list_one-52"><a href="#ABCSimpleRetriveMicroservice.list_one-52"><span class="linenos">52</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-53"><a href="#ABCSimpleRetriveMicroservice.list_one-53"><span class="linenos">53</span></a><span class="sd">            Return object with the correspondent pk.</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-54"><a href="#ABCSimpleRetriveMicroservice.list_one-54"><span class="linenos">54</span></a>
</span><span id="ABCSimpleRetriveMicroservice.list_one-55"><a href="#ABCSimpleRetriveMicroservice.list_one-55"><span class="linenos">55</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-56"><a href="#ABCSimpleRetriveMicroservice.list_one-56"><span class="linenos">56</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-57"><a href="#ABCSimpleRetriveMicroservice.list_one-57"><span class="linenos">57</span></a><span class="sd">                If pk not found on database.</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-58"><a href="#ABCSimpleRetriveMicroservice.list_one-58"><span class="linenos">58</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-59"><a href="#ABCSimpleRetriveMicroservice.list_one-59"><span class="linenos">59</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_list_one_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-60"><a href="#ABCSimpleRetriveMicroservice.list_one-60"><span class="linenos">60</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-61"><a href="#ABCSimpleRetriveMicroservice.list_one-61"><span class="linenos">61</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-62"><a href="#ABCSimpleRetriveMicroservice.list_one-62"><span class="linenos">62</span></a>                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;default_fields&quot;</span><span class="p">:</span> <span class="n">default_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-63"><a href="#ABCSimpleRetriveMicroservice.list_one-63"><span class="linenos">63</span></a>                <span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">:</span> <span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-64"><a href="#ABCSimpleRetriveMicroservice.list_one-64"><span class="linenos">64</span></a>                <span class="s2">&quot;related_fields&quot;</span><span class="p">:</span> <span class="n">related_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.list_one-65"><a href="#ABCSimpleRetriveMicroservice.list_one-65"><span class="linenos">65</span></a>            <span class="p">},</span> <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve an object using list serializer (simple).</p>

<p><strong># DEPRECTED #</strong> It is the same as retrieve using
<code>default_fields: bool = True</code>, if possible migrate to retrieve
function.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class:</strong>  Model class of the end-point</li>
<li><strong>pk:</strong>  Object pk</li>
<li><strong>auth_header:</strong>  Auth header to substitute the microservice original
at the request (user impersonation).</li>
<li><strong>fields:</strong>  Set the fields to be returned by the list end-point.</li>
<li><strong>default_fields:</strong>  Boolean, if true and fields arguments None will return the
default fields set for list by the backend.</li>
<li><strong>foreign_key_fields:</strong>  Return forenging key objects. It will return the fk
corresponding object. Ex: <code>created_by_id</code> reference to
a user <code>model_class</code> the correspondent to User will be
returned at <code>created_by</code>.</li>
<li><strong>related_fields:</strong>  Return related fields objects. Related field objects are
objects that have a forenging key associated with this
model_class, results will be returned as a list of
dictionaries usually in a field with <code>_set</code> at end.
Returning related_fields consume backend resorces, use
carefully.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return object with the correspondent pk.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  If pk not found on database.</li>
</ul>
</div>


                            </div>
                            <div id="ABCSimpleRetriveMicroservice.retrieve" class="classattr">
                                        <input id="ABCSimpleRetriveMicroservice.retrieve-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">retrieve</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">pk</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">default_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">foreign_key_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">related_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ABCSimpleRetriveMicroservice.retrieve-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleRetriveMicroservice.retrieve"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleRetriveMicroservice.retrieve-71"><a href="#ABCSimpleRetriveMicroservice.retrieve-71"><span class="linenos"> 71</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-72"><a href="#ABCSimpleRetriveMicroservice.retrieve-72"><span class="linenos"> 72</span></a>                 <span class="n">default_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-73"><a href="#ABCSimpleRetriveMicroservice.retrieve-73"><span class="linenos"> 73</span></a>                 <span class="n">foreign_key_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-74"><a href="#ABCSimpleRetriveMicroservice.retrieve-74"><span class="linenos"> 74</span></a>                 <span class="n">related_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-75"><a href="#ABCSimpleRetriveMicroservice.retrieve-75"><span class="linenos"> 75</span></a>                 <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-76"><a href="#ABCSimpleRetriveMicroservice.retrieve-76"><span class="linenos"> 76</span></a>                 <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-77"><a href="#ABCSimpleRetriveMicroservice.retrieve-77"><span class="linenos"> 77</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve an object from PumpWood.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-78"><a href="#ABCSimpleRetriveMicroservice.retrieve-78"><span class="linenos"> 78</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-79"><a href="#ABCSimpleRetriveMicroservice.retrieve-79"><span class="linenos"> 79</span></a><span class="sd">        Function to get object serialized by retrieve end-point</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-80"><a href="#ABCSimpleRetriveMicroservice.retrieve-80"><span class="linenos"> 80</span></a><span class="sd">        (more detailed data).</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-81"><a href="#ABCSimpleRetriveMicroservice.retrieve-81"><span class="linenos"> 81</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-82"><a href="#ABCSimpleRetriveMicroservice.retrieve-82"><span class="linenos"> 82</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-83"><a href="#ABCSimpleRetriveMicroservice.retrieve-83"><span class="linenos"> 83</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-84"><a href="#ABCSimpleRetriveMicroservice.retrieve-84"><span class="linenos"> 84</span></a><span class="sd">                Model class of the end-point</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-85"><a href="#ABCSimpleRetriveMicroservice.retrieve-85"><span class="linenos"> 85</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-86"><a href="#ABCSimpleRetriveMicroservice.retrieve-86"><span class="linenos"> 86</span></a><span class="sd">                Object pk</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-87"><a href="#ABCSimpleRetriveMicroservice.retrieve-87"><span class="linenos"> 87</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-88"><a href="#ABCSimpleRetriveMicroservice.retrieve-88"><span class="linenos"> 88</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-89"><a href="#ABCSimpleRetriveMicroservice.retrieve-89"><span class="linenos"> 89</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-90"><a href="#ABCSimpleRetriveMicroservice.retrieve-90"><span class="linenos"> 90</span></a><span class="sd">            fields:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-91"><a href="#ABCSimpleRetriveMicroservice.retrieve-91"><span class="linenos"> 91</span></a><span class="sd">                Set the fields to be returned by the list end-point.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-92"><a href="#ABCSimpleRetriveMicroservice.retrieve-92"><span class="linenos"> 92</span></a><span class="sd">            default_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-93"><a href="#ABCSimpleRetriveMicroservice.retrieve-93"><span class="linenos"> 93</span></a><span class="sd">                Boolean, if true and fields arguments None will return the</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-94"><a href="#ABCSimpleRetriveMicroservice.retrieve-94"><span class="linenos"> 94</span></a><span class="sd">                default fields set for list by the backend.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-95"><a href="#ABCSimpleRetriveMicroservice.retrieve-95"><span class="linenos"> 95</span></a><span class="sd">            foreign_key_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-96"><a href="#ABCSimpleRetriveMicroservice.retrieve-96"><span class="linenos"> 96</span></a><span class="sd">                Return forenging key objects. It will return the fk</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-97"><a href="#ABCSimpleRetriveMicroservice.retrieve-97"><span class="linenos"> 97</span></a><span class="sd">                corresponding object. Ex: `created_by_id` reference to</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-98"><a href="#ABCSimpleRetriveMicroservice.retrieve-98"><span class="linenos"> 98</span></a><span class="sd">                a user `model_class` the correspondent to User will be</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-99"><a href="#ABCSimpleRetriveMicroservice.retrieve-99"><span class="linenos"> 99</span></a><span class="sd">                returned at `created_by`.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-100"><a href="#ABCSimpleRetriveMicroservice.retrieve-100"><span class="linenos">100</span></a><span class="sd">            related_fields:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-101"><a href="#ABCSimpleRetriveMicroservice.retrieve-101"><span class="linenos">101</span></a><span class="sd">                Return related fields objects. Related field objects are</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-102"><a href="#ABCSimpleRetriveMicroservice.retrieve-102"><span class="linenos">102</span></a><span class="sd">                objects that have a forenging key associated with this</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-103"><a href="#ABCSimpleRetriveMicroservice.retrieve-103"><span class="linenos">103</span></a><span class="sd">                model_class, results will be returned as a list of</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-104"><a href="#ABCSimpleRetriveMicroservice.retrieve-104"><span class="linenos">104</span></a><span class="sd">                dictionaries usually in a field with `_set` at end.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-105"><a href="#ABCSimpleRetriveMicroservice.retrieve-105"><span class="linenos">105</span></a><span class="sd">                Returning related_fields consume backend resorces, use</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-106"><a href="#ABCSimpleRetriveMicroservice.retrieve-106"><span class="linenos">106</span></a><span class="sd">                carefully.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-107"><a href="#ABCSimpleRetriveMicroservice.retrieve-107"><span class="linenos">107</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-108"><a href="#ABCSimpleRetriveMicroservice.retrieve-108"><span class="linenos">108</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-109"><a href="#ABCSimpleRetriveMicroservice.retrieve-109"><span class="linenos">109</span></a><span class="sd">            Return object with the correspondent pk.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-110"><a href="#ABCSimpleRetriveMicroservice.retrieve-110"><span class="linenos">110</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-111"><a href="#ABCSimpleRetriveMicroservice.retrieve-111"><span class="linenos">111</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-112"><a href="#ABCSimpleRetriveMicroservice.retrieve-112"><span class="linenos">112</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-113"><a href="#ABCSimpleRetriveMicroservice.retrieve-113"><span class="linenos">113</span></a><span class="sd">                If pk not found on database.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-114"><a href="#ABCSimpleRetriveMicroservice.retrieve-114"><span class="linenos">114</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-115"><a href="#ABCSimpleRetriveMicroservice.retrieve-115"><span class="linenos">115</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_retrieve_url</span><span class="p">(</span><span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-116"><a href="#ABCSimpleRetriveMicroservice.retrieve-116"><span class="linenos">116</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-117"><a href="#ABCSimpleRetriveMicroservice.retrieve-117"><span class="linenos">117</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-118"><a href="#ABCSimpleRetriveMicroservice.retrieve-118"><span class="linenos">118</span></a>                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;default_fields&quot;</span><span class="p">:</span> <span class="n">default_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-119"><a href="#ABCSimpleRetriveMicroservice.retrieve-119"><span class="linenos">119</span></a>                <span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">:</span> <span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-120"><a href="#ABCSimpleRetriveMicroservice.retrieve-120"><span class="linenos">120</span></a>                <span class="s2">&quot;related_fields&quot;</span><span class="p">:</span> <span class="n">related_fields</span><span class="p">},</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve-121"><a href="#ABCSimpleRetriveMicroservice.retrieve-121"><span class="linenos">121</span></a>            <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve an object from PumpWood.</p>

<p>Function to get object serialized by retrieve end-point
(more detailed data).</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class:</strong>  Model class of the end-point</li>
<li><strong>pk:</strong>  Object pk</li>
<li><strong>auth_header:</strong>  Auth header to substitute the microservice original
at the request (user impersonation).</li>
<li><strong>fields:</strong>  Set the fields to be returned by the list end-point.</li>
<li><strong>default_fields:</strong>  Boolean, if true and fields arguments None will return the
default fields set for list by the backend.</li>
<li><strong>foreign_key_fields:</strong>  Return forenging key objects. It will return the fk
corresponding object. Ex: <code>created_by_id</code> reference to
a user <code>model_class</code> the correspondent to User will be
returned at <code>created_by</code>.</li>
<li><strong>related_fields:</strong>  Return related fields objects. Related field objects are
objects that have a forenging key associated with this
model_class, results will be returned as a list of
dictionaries usually in a field with <code>_set</code> at end.
Returning related_fields consume backend resorces, use
carefully.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return object with the correspondent pk.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  If pk not found on database.</li>
</ul>
</div>


                            </div>
                            <div id="ABCSimpleRetriveMicroservice.retrieve_file" class="classattr">
                                        <input id="ABCSimpleRetriveMicroservice.retrieve_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">retrieve_file</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">pk</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">save_file</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span>,</span><span class="param">	<span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">if_exists</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;fail&#39;</span></span><span class="return-annotation">) -> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="nb">any</span><span class="o">&gt;</span>:</span></span>

                <label class="view-source-button" for="ABCSimpleRetriveMicroservice.retrieve_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleRetriveMicroservice.retrieve_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleRetriveMicroservice.retrieve_file-127"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-127"><span class="linenos">127</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">retrieve_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-128"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-128"><span class="linenos">128</span></a>                      <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">save_file</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-129"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-129"><span class="linenos">129</span></a>                      <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-130"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-130"><span class="linenos">130</span></a>                      <span class="n">if_exists</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">any</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-131"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-131"><span class="linenos">131</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a file from PumpWood.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-132"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-132"><span class="linenos">132</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-133"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-133"><span class="linenos">133</span></a><span class="sd">        This function will retrieve file as a single request, depending on the</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-134"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-134"><span class="linenos">134</span></a><span class="sd">        size of the files it would be preferred to use streaming end-point.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-135"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-135"><span class="linenos">135</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-136"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-136"><span class="linenos">136</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-137"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-137"><span class="linenos">137</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-138"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-138"><span class="linenos">138</span></a><span class="sd">                Class of the model to retrieve file.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-139"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-139"><span class="linenos">139</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-140"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-140"><span class="linenos">140</span></a><span class="sd">                Pk of the object associeted file.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-141"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-141"><span class="linenos">141</span></a><span class="sd">            file_field:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-142"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-142"><span class="linenos">142</span></a><span class="sd">                Field of the file to be downloaded.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-143"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-143"><span class="linenos">143</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-144"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-144"><span class="linenos">144</span></a><span class="sd">                Dictionary containing the auth header.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-145"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-145"><span class="linenos">145</span></a><span class="sd">            save_file:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-146"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-146"><span class="linenos">146</span></a><span class="sd">                If data is to be saved as file or return get</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-147"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-147"><span class="linenos">147</span></a><span class="sd">                response.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-148"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-148"><span class="linenos">148</span></a><span class="sd">            save_path:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-149"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-149"><span class="linenos">149</span></a><span class="sd">                Path of the directory to save file.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-150"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-150"><span class="linenos">150</span></a><span class="sd">            file_name:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-151"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-151"><span class="linenos">151</span></a><span class="sd">                Name of the file, if None it will have same name as</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-152"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-152"><span class="linenos">152</span></a><span class="sd">                saved in PumpWood.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-153"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-153"><span class="linenos">153</span></a><span class="sd">            if_exists:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-154"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-154"><span class="linenos">154</span></a><span class="sd">                Values must be in {&#39;fail&#39;, &#39;change_name&#39;, &#39;overwrite&#39;, &#39;skip&#39;}.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-155"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-155"><span class="linenos">155</span></a><span class="sd">                Set what to do if there is a file with same name. Skip</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-156"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-156"><span class="linenos">156</span></a><span class="sd">                will not download file if there is already with same</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-157"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-157"><span class="linenos">157</span></a><span class="sd">                os.path.join(save_path, file_name), file_name must be set</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-158"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-158"><span class="linenos">158</span></a><span class="sd">                for skip argument.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-159"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-159"><span class="linenos">159</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-160"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-160"><span class="linenos">160</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-161"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-161"><span class="linenos">161</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-162"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-162"><span class="linenos">162</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-163"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-163"><span class="linenos">163</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-164"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-164"><span class="linenos">164</span></a><span class="sd">            May return the file name if save_file=True; If false will return</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-165"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-165"><span class="linenos">165</span></a><span class="sd">            a dictonary with keys `filename` with original file name and</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-166"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-166"><span class="linenos">166</span></a><span class="sd">            `content` with binary data of file content.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-167"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-167"><span class="linenos">167</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-168"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-168"><span class="linenos">168</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-169"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-169"><span class="linenos">169</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-170"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-170"><span class="linenos">170</span></a><span class="sd">                &#39;storage_object attribute not set for view, file operations</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-171"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-171"><span class="linenos">171</span></a><span class="sd">                are disable&#39;. This indicates that storage for this backend</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-172"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-172"><span class="linenos">172</span></a><span class="sd">                was not configured, so it is not possible to make storage</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-173"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-173"><span class="linenos">173</span></a><span class="sd">                operations,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-174"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-174"><span class="linenos">174</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-175"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-175"><span class="linenos">175</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary&#39;. This</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-176"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-176"><span class="linenos">176</span></a><span class="sd">                indicates that the `file_field` parameter is not listed as</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-177"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-177"><span class="linenos">177</span></a><span class="sd">                a file field on the backend.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-178"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-178"><span class="linenos">178</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-179"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-179"><span class="linenos">179</span></a><span class="sd">                &#39;field [{}] not found or null at object&#39;. This indicates that</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-180"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-180"><span class="linenos">180</span></a><span class="sd">                the file field requested is not present on object fields.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-181"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-181"><span class="linenos">181</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-182"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-182"><span class="linenos">182</span></a><span class="sd">                &#39;Object not found in storage [{}]&#39;. This indicates that the</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-183"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-183"><span class="linenos">183</span></a><span class="sd">                file associated with file_field is not avaiable at the</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-184"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-184"><span class="linenos">184</span></a><span class="sd">                storage. This should not ocorrur, it might have a manual</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-185"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-185"><span class="linenos">185</span></a><span class="sd">                update at the model_class table or manual removal/rename of</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-186"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-186"><span class="linenos">186</span></a><span class="sd">                files on storage.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-187"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-187"><span class="linenos">187</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-188"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-188"><span class="linenos">188</span></a>        <span class="k">if</span> <span class="n">if_exists</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;fail&quot;</span><span class="p">,</span> <span class="s2">&quot;change_name&quot;</span><span class="p">,</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">,</span> <span class="s2">&quot;skip&quot;</span><span class="p">]:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-189"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-189"><span class="linenos">189</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-190"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-190"><span class="linenos">190</span></a>                <span class="s2">&quot;if_exists must be in [&#39;fail&#39;, &#39;change_name&#39;, &#39;overwrite&#39;, &quot;</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-191"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-191"><span class="linenos">191</span></a>                <span class="s2">&quot;&#39;skip&#39;]&quot;</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-192"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-192"><span class="linenos">192</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-193"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-193"><span class="linenos">193</span></a>        <span class="k">if</span> <span class="n">file_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s1">&#39;skip&#39;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-194"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-194"><span class="linenos">194</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-195"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-195"><span class="linenos">195</span></a>            <span class="n">is_file_already</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-196"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-196"><span class="linenos">196</span></a>            <span class="k">if</span> <span class="n">is_file_already</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-197"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-197"><span class="linenos">197</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;skiping file already exists: &quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-198"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-198"><span class="linenos">198</span></a>                <span class="k">return</span> <span class="n">file_path</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-199"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-199"><span class="linenos">199</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-200"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-200"><span class="linenos">200</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_retrieve_file_url</span><span class="p">(</span><span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-201"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-201"><span class="linenos">201</span></a>        <span class="n">file_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_get</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-202"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-202"><span class="linenos">202</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file-field&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">},</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-203"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-203"><span class="linenos">203</span></a>            <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-204"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-204"><span class="linenos">204</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_file</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-205"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-205"><span class="linenos">205</span></a>            <span class="k">return</span> <span class="n">file_response</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-206"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-206"><span class="linenos">206</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-207"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-207"><span class="linenos">207</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">save_path</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-208"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-208"><span class="linenos">208</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-209"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-209"><span class="linenos">209</span></a>                <span class="s2">&quot;Path to save retrieved file [</span><span class="si">{}</span><span class="s2">] does not exist&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-210"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-210"><span class="linenos">210</span></a>                    <span class="n">save_path</span><span class="p">))</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-211"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-211"><span class="linenos">211</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-212"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-212"><span class="linenos">212</span></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">secure_filename</span><span class="p">(</span><span class="n">file_name</span> <span class="ow">or</span> <span class="n">file_response</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">])</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-213"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-213"><span class="linenos">213</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-214"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-214"><span class="linenos">214</span></a>        <span class="n">is_file_already</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-215"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-215"><span class="linenos">215</span></a>        <span class="k">if</span> <span class="n">is_file_already</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-216"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-216"><span class="linenos">216</span></a>            <span class="k">if</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s2">&quot;change_name&quot;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-217"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-217"><span class="linenos">217</span></a>                <span class="n">filename</span><span class="p">,</span> <span class="n">file_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-218"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-218"><span class="linenos">218</span></a>                <span class="n">too_many_tries</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-219"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-219"><span class="linenos">219</span></a>                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-220"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-220"><span class="linenos">220</span></a>                    <span class="n">new_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{filename}</span><span class="s2">__</span><span class="si">{count}{extension}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-221"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-221"><span class="linenos">221</span></a>                        <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-222"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-222"><span class="linenos">222</span></a>                        <span class="n">extension</span><span class="o">=</span><span class="n">file_extension</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-223"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-223"><span class="linenos">223</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">new_path</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-224"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-224"><span class="linenos">224</span></a>                        <span class="n">file_path</span> <span class="o">=</span> <span class="n">new_path</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-225"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-225"><span class="linenos">225</span></a>                        <span class="n">too_many_tries</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-226"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-226"><span class="linenos">226</span></a>                        <span class="k">break</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-227"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-227"><span class="linenos">227</span></a>                <span class="k">if</span> <span class="n">too_many_tries</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-228"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-228"><span class="linenos">228</span></a>                    <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-229"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-229"><span class="linenos">229</span></a>                        <span class="p">(</span><span class="s2">&quot;Too many tries to find a not used file name.&quot;</span> <span class="o">+</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-230"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-230"><span class="linenos">230</span></a>                         <span class="s2">&quot; file_path[</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">)))</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-231"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-231"><span class="linenos">231</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-232"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-232"><span class="linenos">232</span></a>            <span class="k">elif</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s2">&quot;fail&quot;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-233"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-233"><span class="linenos">233</span></a>                <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-234"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-234"><span class="linenos">234</span></a>                    <span class="p">(</span><span class="s2">&quot;if_exists set as &#39;fail&#39; and there is a file with same&quot;</span> <span class="o">+</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-235"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-235"><span class="linenos">235</span></a>                     <span class="s2">&quot;name. file_path [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-236"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-236"><span class="linenos">236</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-237"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-237"><span class="linenos">237</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-238"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-238"><span class="linenos">238</span></a>            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_response</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_file-239"><a href="#ABCSimpleRetriveMicroservice.retrieve_file-239"><span class="linenos">239</span></a>        <span class="k">return</span> <span class="n">file_path</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve a file from PumpWood.</p>

<p>This function will retrieve file as a single request, depending on the
size of the files it would be preferred to use streaming end-point.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class:</strong>  Class of the model to retrieve file.</li>
<li><strong>pk:</strong>  Pk of the object associeted file.</li>
<li><strong>file_field:</strong>  Field of the file to be downloaded.</li>
<li><strong>auth_header:</strong>  Dictionary containing the auth header.</li>
<li><strong>save_file:</strong>  If data is to be saved as file or return get
response.</li>
<li><strong>save_path:</strong>  Path of the directory to save file.</li>
<li><strong>file_name:</strong>  Name of the file, if None it will have same name as
saved in PumpWood.</li>
<li><strong>if_exists:</strong>  Values must be in {'fail', 'change_name', 'overwrite', 'skip'}.
Set what to do if there is a file with same name. Skip
will not download file if there is already with same
os.path.join(save_path, file_name), file_name must be set
for skip argument.</li>
<li><strong>auth_header:</strong>  Auth header to substitute the microservice original
at the request (user impersonation).</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>May return the file name if save_file=True; If false will return
  a dictonary with keys <code>filename</code> with original file name and
  <code>content</code> with binary data of file content.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodForbidden:</strong>  'storage_object attribute not set for view, file operations
are disable'. This indicates that storage for this backend
was not configured, so it is not possible to make storage
operations,</li>
<li><strong>PumpWoodForbidden:</strong>  'file_field must be set on self.file_fields dictionary'. This
indicates that the <code>file_field</code> parameter is not listed as
a file field on the backend.</li>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'field [{}] not found or null at object'. This indicates that
the file field requested is not present on object fields.</li>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'Object not found in storage [{}]'. This indicates that the
file associated with file_field is not avaiable at the
storage. This should not ocorrur, it might have a manual
update at the model_class table or manual removal/rename of
files on storage.</li>
</ul>
</div>


                            </div>
                            <div id="ABCSimpleRetriveMicroservice.retrieve_streaming_file" class="classattr">
                                        <input id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">retrieve_streaming_file</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">pk</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span>,</span><span class="param">	<span class="n">if_exists</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;fail&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ABCSimpleRetriveMicroservice.retrieve_streaming_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-246"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-246"><span class="linenos">246</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">retrieve_streaming_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-247"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-247"><span class="linenos">247</span></a>                                <span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-248"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-248"><span class="linenos">248</span></a>                                <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-249"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-249"><span class="linenos">249</span></a>                                <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-250"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-250"><span class="linenos">250</span></a>                                <span class="n">if_exists</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-251"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-251"><span class="linenos">251</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a file from PumpWood using streaming to retrieve content.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-252"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-252"><span class="linenos">252</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-253"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-253"><span class="linenos">253</span></a><span class="sd">        This funcion uses file streaming to retrieve file content, it should be</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-254"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-254"><span class="linenos">254</span></a><span class="sd">        prefered when dealing with large (bigger than 10Mb) files transfer.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-255"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-255"><span class="linenos">255</span></a><span class="sd">        Using this end-point the file is not loaded on backend memory content</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-256"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-256"><span class="linenos">256</span></a><span class="sd">        is transfered by chucks that are read at the storage and transfered</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-257"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-257"><span class="linenos">257</span></a><span class="sd">        to user.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-258"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-258"><span class="linenos">258</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-259"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-259"><span class="linenos">259</span></a><span class="sd">        It will necessarily save the content as a file, there is not the</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-260"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-260"><span class="linenos">260</span></a><span class="sd">        possibility of retrieving the content directly from request.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-261"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-261"><span class="linenos">261</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-262"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-262"><span class="linenos">262</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-263"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-263"><span class="linenos">263</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-264"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-264"><span class="linenos">264</span></a><span class="sd">                Class of the model to retrieve file.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-265"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-265"><span class="linenos">265</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-266"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-266"><span class="linenos">266</span></a><span class="sd">                Pk of the object associeted file.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-267"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-267"><span class="linenos">267</span></a><span class="sd">            file_field:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-268"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-268"><span class="linenos">268</span></a><span class="sd">                Field of the file to be downloaded.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-269"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-269"><span class="linenos">269</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-270"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-270"><span class="linenos">270</span></a><span class="sd">                Dictionary containing the auth header.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-271"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-271"><span class="linenos">271</span></a><span class="sd">            save_path:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-272"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-272"><span class="linenos">272</span></a><span class="sd">                Path of the directory to save file.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-273"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-273"><span class="linenos">273</span></a><span class="sd">            file_name:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-274"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-274"><span class="linenos">274</span></a><span class="sd">                Name of the file, if None it will have same name as</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-275"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-275"><span class="linenos">275</span></a><span class="sd">                saved in PumpWood.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-276"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-276"><span class="linenos">276</span></a><span class="sd">            if_exists:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-277"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-277"><span class="linenos">277</span></a><span class="sd">                Values must be in {&#39;fail&#39;, &#39;change_name&#39;, &#39;overwrite&#39;}.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-278"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-278"><span class="linenos">278</span></a><span class="sd">                Set what to do if there is a file with same name.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-279"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-279"><span class="linenos">279</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-280"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-280"><span class="linenos">280</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-281"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-281"><span class="linenos">281</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-282"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-282"><span class="linenos">282</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-283"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-283"><span class="linenos">283</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-284"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-284"><span class="linenos">284</span></a><span class="sd">            Returns the file path that recived the file content.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-285"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-285"><span class="linenos">285</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-286"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-286"><span class="linenos">286</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-287"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-287"><span class="linenos">287</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-288"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-288"><span class="linenos">288</span></a><span class="sd">                &#39;storage_object attribute not set for view, file operations</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-289"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-289"><span class="linenos">289</span></a><span class="sd">                are disable&#39;. This indicates that storage for this backend</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-290"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-290"><span class="linenos">290</span></a><span class="sd">                was not configured, so it is not possible to make storage</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-291"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-291"><span class="linenos">291</span></a><span class="sd">                operations,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-292"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-292"><span class="linenos">292</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-293"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-293"><span class="linenos">293</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary&#39;. This</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-294"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-294"><span class="linenos">294</span></a><span class="sd">                indicates that the `file_field` parameter is not listed as</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-295"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-295"><span class="linenos">295</span></a><span class="sd">                a file field on the backend.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-296"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-296"><span class="linenos">296</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-297"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-297"><span class="linenos">297</span></a><span class="sd">                &#39;field [{}] not found or null at object&#39;. This indicates that</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-298"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-298"><span class="linenos">298</span></a><span class="sd">                the file field requested is not present on object fields.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-299"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-299"><span class="linenos">299</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-300"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-300"><span class="linenos">300</span></a><span class="sd">                &#39;Object not found in storage [{}]&#39;. This indicates that the</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-301"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-301"><span class="linenos">301</span></a><span class="sd">                file associated with file_field is not avaiable at the</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-302"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-302"><span class="linenos">302</span></a><span class="sd">                storage. This should not ocorrur, it might have a manual</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-303"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-303"><span class="linenos">303</span></a><span class="sd">                update at the model_class table or manual removal/rename of</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-304"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-304"><span class="linenos">304</span></a><span class="sd">                files on storage.</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-305"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-305"><span class="linenos">305</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-306"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-306"><span class="linenos">306</span></a>        <span class="n">request_header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check__auth_header</span><span class="p">(</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-307"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-307"><span class="linenos">307</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-308"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-308"><span class="linenos">308</span></a>        <span class="c1"># begin Args check</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-309"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-309"><span class="linenos">309</span></a>        <span class="k">if</span> <span class="n">if_exists</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;fail&quot;</span><span class="p">,</span> <span class="s2">&quot;change_name&quot;</span><span class="p">,</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">]:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-310"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-310"><span class="linenos">310</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-311"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-311"><span class="linenos">311</span></a>                <span class="s2">&quot;if_exists must be in [&#39;fail&#39;, &#39;change_name&#39;, &#39;overwrite&#39;]&quot;</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-312"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-312"><span class="linenos">312</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-313"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-313"><span class="linenos">313</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">save_path</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-314"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-314"><span class="linenos">314</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-315"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-315"><span class="linenos">315</span></a>                <span class="s2">&quot;Path to save retrieved file [</span><span class="si">{}</span><span class="s2">] does not exist&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-316"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-316"><span class="linenos">316</span></a>                    <span class="n">save_path</span><span class="p">))</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-317"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-317"><span class="linenos">317</span></a>        <span class="c1"># end Args check</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-318"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-318"><span class="linenos">318</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-319"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-319"><span class="linenos">319</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-320"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-320"><span class="linenos">320</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s2">&quot;change_name&quot;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-321"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-321"><span class="linenos">321</span></a>            <span class="n">filename</span><span class="p">,</span> <span class="n">file_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-322"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-322"><span class="linenos">322</span></a>            <span class="n">too_many_tries</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-323"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-323"><span class="linenos">323</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-324"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-324"><span class="linenos">324</span></a>                <span class="n">new_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{filename}</span><span class="s2">__</span><span class="si">{count}{extension}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-325"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-325"><span class="linenos">325</span></a>                    <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-326"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-326"><span class="linenos">326</span></a>                    <span class="n">extension</span><span class="o">=</span><span class="n">file_extension</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-327"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-327"><span class="linenos">327</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">new_path</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-328"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-328"><span class="linenos">328</span></a>                    <span class="n">file_path</span> <span class="o">=</span> <span class="n">new_path</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-329"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-329"><span class="linenos">329</span></a>                    <span class="n">too_many_tries</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-330"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-330"><span class="linenos">330</span></a>                    <span class="k">break</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-331"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-331"><span class="linenos">331</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">too_many_tries</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-332"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-332"><span class="linenos">332</span></a>                <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-333"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-333"><span class="linenos">333</span></a>                    <span class="p">(</span><span class="s2">&quot;Too many tries to find a not used file name.&quot;</span> <span class="o">+</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-334"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-334"><span class="linenos">334</span></a>                     <span class="s2">&quot; file_path[</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">)))</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-335"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-335"><span class="linenos">335</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-336"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-336"><span class="linenos">336</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">if_exists</span> <span class="o">==</span> <span class="s2">&quot;fail&quot;</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-337"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-337"><span class="linenos">337</span></a>            <span class="k">raise</span> <span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-338"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-338"><span class="linenos">338</span></a>                <span class="p">(</span><span class="s2">&quot;if_exists set as &#39;fail&#39; and there is a file with same&quot;</span> <span class="o">+</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-339"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-339"><span class="linenos">339</span></a>                 <span class="s2">&quot;name. file_path [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-340"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-340"><span class="linenos">340</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-341"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-341"><span class="linenos">341</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_retrieve_file_straming_url</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-342"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-342"><span class="linenos">342</span></a>            <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-343"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-343"><span class="linenos">343</span></a>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-344"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-344"><span class="linenos">344</span></a>        <span class="n">get_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_url</span> <span class="o">+</span> <span class="n">url_str</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-345"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-345"><span class="linenos">345</span></a>        <span class="k">with</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-346"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-346"><span class="linenos">346</span></a>                <span class="n">get_url</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_ssl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">request_header</span><span class="p">,</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-347"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-347"><span class="linenos">347</span></a>                <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file-field&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">},</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-348"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-348"><span class="linenos">348</span></a>                <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default_timeout</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-349"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-349"><span class="linenos">349</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">error_handler</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-350"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-350"><span class="linenos">350</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-351"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-351"><span class="linenos">351</span></a>                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">8192</span><span class="p">):</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-352"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-352"><span class="linenos">352</span></a>                    <span class="k">if</span> <span class="n">chunk</span><span class="p">:</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-353"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-353"><span class="linenos">353</span></a>                        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="ABCSimpleRetriveMicroservice.retrieve_streaming_file-354"><a href="#ABCSimpleRetriveMicroservice.retrieve_streaming_file-354"><span class="linenos">354</span></a>        <span class="k">return</span> <span class="n">file_path</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve a file from PumpWood using streaming to retrieve content.</p>

<p>This funcion uses file streaming to retrieve file content, it should be
prefered when dealing with large (bigger than 10Mb) files transfer.
Using this end-point the file is not loaded on backend memory content
is transfered by chucks that are read at the storage and transfered
to user.</p>

<p>It will necessarily save the content as a file, there is not the
possibility of retrieving the content directly from request.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class:</strong>  Class of the model to retrieve file.</li>
<li><strong>pk:</strong>  Pk of the object associeted file.</li>
<li><strong>file_field:</strong>  Field of the file to be downloaded.</li>
<li><strong>auth_header:</strong>  Dictionary containing the auth header.</li>
<li><strong>save_path:</strong>  Path of the directory to save file.</li>
<li><strong>file_name:</strong>  Name of the file, if None it will have same name as
saved in PumpWood.</li>
<li><strong>if_exists:</strong>  Values must be in {'fail', 'change_name', 'overwrite'}.
Set what to do if there is a file with same name.</li>
<li><strong>auth_header:</strong>  Auth header to substitute the microservice original
at the request (user impersonation).</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Returns the file path that recived the file content.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodForbidden:</strong>  'storage_object attribute not set for view, file operations
are disable'. This indicates that storage for this backend
was not configured, so it is not possible to make storage
operations,</li>
<li><strong>PumpWoodForbidden:</strong>  'file_field must be set on self.file_fields dictionary'. This
indicates that the <code>file_field</code> parameter is not listed as
a file field on the backend.</li>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'field [{}] not found or null at object'. This indicates that
the file field requested is not present on object fields.</li>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'Object not found in storage [{}]'. This indicates that the
file associated with file_field is not avaiable at the
storage. This should not ocorrur, it might have a manual
update at the model_class table or manual removal/rename of
files on storage.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="ABCSimpleDeleteMicroservice">
                            <input id="ABCSimpleDeleteMicroservice-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ABCSimpleDeleteMicroservice</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="ABCSimpleDeleteMicroservice-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleDeleteMicroservice"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleDeleteMicroservice-6"><a href="#ABCSimpleDeleteMicroservice-6"><span class="linenos">  6</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ABCSimpleDeleteMicroservice</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="ABCSimpleDeleteMicroservice-7"><a href="#ABCSimpleDeleteMicroservice-7"><span class="linenos">  7</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract class for calls at Pumpwood delete end-points.&quot;&quot;&quot;</span>
</span><span id="ABCSimpleDeleteMicroservice-8"><a href="#ABCSimpleDeleteMicroservice-8"><span class="linenos">  8</span></a>
</span><span id="ABCSimpleDeleteMicroservice-9"><a href="#ABCSimpleDeleteMicroservice-9"><span class="linenos">  9</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ABCSimpleDeleteMicroservice-10"><a href="#ABCSimpleDeleteMicroservice-10"><span class="linenos"> 10</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_delete_request_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
</span><span id="ABCSimpleDeleteMicroservice-11"><a href="#ABCSimpleDeleteMicroservice-11"><span class="linenos"> 11</span></a>        <span class="k">return</span> <span class="s2">&quot;rest/</span><span class="si">%s</span><span class="s2">/delete/</span><span class="si">%s</span><span class="s2">/&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice-12"><a href="#ABCSimpleDeleteMicroservice-12"><span class="linenos"> 12</span></a>
</span><span id="ABCSimpleDeleteMicroservice-13"><a href="#ABCSimpleDeleteMicroservice-13"><span class="linenos"> 13</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice-14"><a href="#ABCSimpleDeleteMicroservice-14"><span class="linenos"> 14</span></a>               <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ABCSimpleDeleteMicroservice-15"><a href="#ABCSimpleDeleteMicroservice-15"><span class="linenos"> 15</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Send delete request to a PumpWood object.</span>
</span><span id="ABCSimpleDeleteMicroservice-16"><a href="#ABCSimpleDeleteMicroservice-16"><span class="linenos"> 16</span></a>
</span><span id="ABCSimpleDeleteMicroservice-17"><a href="#ABCSimpleDeleteMicroservice-17"><span class="linenos"> 17</span></a><span class="sd">        Delete (or whatever the PumpWood system have been implemented) the</span>
</span><span id="ABCSimpleDeleteMicroservice-18"><a href="#ABCSimpleDeleteMicroservice-18"><span class="linenos"> 18</span></a><span class="sd">        object with the specified pk.</span>
</span><span id="ABCSimpleDeleteMicroservice-19"><a href="#ABCSimpleDeleteMicroservice-19"><span class="linenos"> 19</span></a>
</span><span id="ABCSimpleDeleteMicroservice-20"><a href="#ABCSimpleDeleteMicroservice-20"><span class="linenos"> 20</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleDeleteMicroservice-21"><a href="#ABCSimpleDeleteMicroservice-21"><span class="linenos"> 21</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleDeleteMicroservice-22"><a href="#ABCSimpleDeleteMicroservice-22"><span class="linenos"> 22</span></a><span class="sd">                Model class to delete the object</span>
</span><span id="ABCSimpleDeleteMicroservice-23"><a href="#ABCSimpleDeleteMicroservice-23"><span class="linenos"> 23</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleDeleteMicroservice-24"><a href="#ABCSimpleDeleteMicroservice-24"><span class="linenos"> 24</span></a><span class="sd">                Object pk to be deleted (or whatever the PumpWood system</span>
</span><span id="ABCSimpleDeleteMicroservice-25"><a href="#ABCSimpleDeleteMicroservice-25"><span class="linenos"> 25</span></a><span class="sd">                have been implemented). Some model_class with &#39;deleted&#39; field</span>
</span><span id="ABCSimpleDeleteMicroservice-26"><a href="#ABCSimpleDeleteMicroservice-26"><span class="linenos"> 26</span></a><span class="sd">                does not remove the entry, it will flag deleted=True at this</span>
</span><span id="ABCSimpleDeleteMicroservice-27"><a href="#ABCSimpleDeleteMicroservice-27"><span class="linenos"> 27</span></a><span class="sd">                cases. Model class with delete=True will be not retrieved</span>
</span><span id="ABCSimpleDeleteMicroservice-28"><a href="#ABCSimpleDeleteMicroservice-28"><span class="linenos"> 28</span></a><span class="sd">                by default on `list` and `list_without_pag` end-points.</span>
</span><span id="ABCSimpleDeleteMicroservice-29"><a href="#ABCSimpleDeleteMicroservice-29"><span class="linenos"> 29</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleDeleteMicroservice-30"><a href="#ABCSimpleDeleteMicroservice-30"><span class="linenos"> 30</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleDeleteMicroservice-31"><a href="#ABCSimpleDeleteMicroservice-31"><span class="linenos"> 31</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleDeleteMicroservice-32"><a href="#ABCSimpleDeleteMicroservice-32"><span class="linenos"> 32</span></a>
</span><span id="ABCSimpleDeleteMicroservice-33"><a href="#ABCSimpleDeleteMicroservice-33"><span class="linenos"> 33</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleDeleteMicroservice-34"><a href="#ABCSimpleDeleteMicroservice-34"><span class="linenos"> 34</span></a><span class="sd">            Returns delete object.</span>
</span><span id="ABCSimpleDeleteMicroservice-35"><a href="#ABCSimpleDeleteMicroservice-35"><span class="linenos"> 35</span></a>
</span><span id="ABCSimpleDeleteMicroservice-36"><a href="#ABCSimpleDeleteMicroservice-36"><span class="linenos"> 36</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleDeleteMicroservice-37"><a href="#ABCSimpleDeleteMicroservice-37"><span class="linenos"> 37</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleDeleteMicroservice-38"><a href="#ABCSimpleDeleteMicroservice-38"><span class="linenos"> 38</span></a><span class="sd">                &#39;Requested object {model_class}[{pk}] not found.&#39; This</span>
</span><span id="ABCSimpleDeleteMicroservice-39"><a href="#ABCSimpleDeleteMicroservice-39"><span class="linenos"> 39</span></a><span class="sd">                indicates that the pk was not found in database.</span>
</span><span id="ABCSimpleDeleteMicroservice-40"><a href="#ABCSimpleDeleteMicroservice-40"><span class="linenos"> 40</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleDeleteMicroservice-41"><a href="#ABCSimpleDeleteMicroservice-41"><span class="linenos"> 41</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_delete_request_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice-42"><a href="#ABCSimpleDeleteMicroservice-42"><span class="linenos"> 42</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_delete</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice-43"><a href="#ABCSimpleDeleteMicroservice-43"><span class="linenos"> 43</span></a>
</span><span id="ABCSimpleDeleteMicroservice-44"><a href="#ABCSimpleDeleteMicroservice-44"><span class="linenos"> 44</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ABCSimpleDeleteMicroservice-45"><a href="#ABCSimpleDeleteMicroservice-45"><span class="linenos"> 45</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_remove_file_field</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
</span><span id="ABCSimpleDeleteMicroservice-46"><a href="#ABCSimpleDeleteMicroservice-46"><span class="linenos"> 46</span></a>        <span class="k">return</span> <span class="s2">&quot;rest/</span><span class="si">%s</span><span class="s2">/remove-file-field/</span><span class="si">%s</span><span class="s2">/&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice-47"><a href="#ABCSimpleDeleteMicroservice-47"><span class="linenos"> 47</span></a>
</span><span id="ABCSimpleDeleteMicroservice-48"><a href="#ABCSimpleDeleteMicroservice-48"><span class="linenos"> 48</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice-49"><a href="#ABCSimpleDeleteMicroservice-49"><span class="linenos"> 49</span></a>                    <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ABCSimpleDeleteMicroservice-50"><a href="#ABCSimpleDeleteMicroservice-50"><span class="linenos"> 50</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Send delete request to a PumpWood object.</span>
</span><span id="ABCSimpleDeleteMicroservice-51"><a href="#ABCSimpleDeleteMicroservice-51"><span class="linenos"> 51</span></a>
</span><span id="ABCSimpleDeleteMicroservice-52"><a href="#ABCSimpleDeleteMicroservice-52"><span class="linenos"> 52</span></a><span class="sd">        Delete (or whatever the PumpWood system have been implemented) the</span>
</span><span id="ABCSimpleDeleteMicroservice-53"><a href="#ABCSimpleDeleteMicroservice-53"><span class="linenos"> 53</span></a><span class="sd">        object with the specified pk.</span>
</span><span id="ABCSimpleDeleteMicroservice-54"><a href="#ABCSimpleDeleteMicroservice-54"><span class="linenos"> 54</span></a>
</span><span id="ABCSimpleDeleteMicroservice-55"><a href="#ABCSimpleDeleteMicroservice-55"><span class="linenos"> 55</span></a><span class="sd">        At previous versions this function was `remove_file_field`. An alias</span>
</span><span id="ABCSimpleDeleteMicroservice-56"><a href="#ABCSimpleDeleteMicroservice-56"><span class="linenos"> 56</span></a><span class="sd">        is created for backward compatibility.</span>
</span><span id="ABCSimpleDeleteMicroservice-57"><a href="#ABCSimpleDeleteMicroservice-57"><span class="linenos"> 57</span></a>
</span><span id="ABCSimpleDeleteMicroservice-58"><a href="#ABCSimpleDeleteMicroservice-58"><span class="linenos"> 58</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleDeleteMicroservice-59"><a href="#ABCSimpleDeleteMicroservice-59"><span class="linenos"> 59</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleDeleteMicroservice-60"><a href="#ABCSimpleDeleteMicroservice-60"><span class="linenos"> 60</span></a><span class="sd">                Model class to delete the object</span>
</span><span id="ABCSimpleDeleteMicroservice-61"><a href="#ABCSimpleDeleteMicroservice-61"><span class="linenos"> 61</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleDeleteMicroservice-62"><a href="#ABCSimpleDeleteMicroservice-62"><span class="linenos"> 62</span></a><span class="sd">                Object pk to be deleted (or whatever the PumpWood system</span>
</span><span id="ABCSimpleDeleteMicroservice-63"><a href="#ABCSimpleDeleteMicroservice-63"><span class="linenos"> 63</span></a><span class="sd">                have been implemented).</span>
</span><span id="ABCSimpleDeleteMicroservice-64"><a href="#ABCSimpleDeleteMicroservice-64"><span class="linenos"> 64</span></a><span class="sd">            file_field:</span>
</span><span id="ABCSimpleDeleteMicroservice-65"><a href="#ABCSimpleDeleteMicroservice-65"><span class="linenos"> 65</span></a><span class="sd">                File field to be removed from storage.</span>
</span><span id="ABCSimpleDeleteMicroservice-66"><a href="#ABCSimpleDeleteMicroservice-66"><span class="linenos"> 66</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleDeleteMicroservice-67"><a href="#ABCSimpleDeleteMicroservice-67"><span class="linenos"> 67</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleDeleteMicroservice-68"><a href="#ABCSimpleDeleteMicroservice-68"><span class="linenos"> 68</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleDeleteMicroservice-69"><a href="#ABCSimpleDeleteMicroservice-69"><span class="linenos"> 69</span></a>
</span><span id="ABCSimpleDeleteMicroservice-70"><a href="#ABCSimpleDeleteMicroservice-70"><span class="linenos"> 70</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleDeleteMicroservice-71"><a href="#ABCSimpleDeleteMicroservice-71"><span class="linenos"> 71</span></a><span class="sd">            Return True is file was successful removed</span>
</span><span id="ABCSimpleDeleteMicroservice-72"><a href="#ABCSimpleDeleteMicroservice-72"><span class="linenos"> 72</span></a>
</span><span id="ABCSimpleDeleteMicroservice-73"><a href="#ABCSimpleDeleteMicroservice-73"><span class="linenos"> 73</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleDeleteMicroservice-74"><a href="#ABCSimpleDeleteMicroservice-74"><span class="linenos"> 74</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleDeleteMicroservice-75"><a href="#ABCSimpleDeleteMicroservice-75"><span class="linenos"> 75</span></a><span class="sd">                &#39;storage_object attribute not set for view, file operations</span>
</span><span id="ABCSimpleDeleteMicroservice-76"><a href="#ABCSimpleDeleteMicroservice-76"><span class="linenos"> 76</span></a><span class="sd">                are disable&#39;. This indicates that storage_object is not</span>
</span><span id="ABCSimpleDeleteMicroservice-77"><a href="#ABCSimpleDeleteMicroservice-77"><span class="linenos"> 77</span></a><span class="sd">                associated with view, not allowing it to make storage</span>
</span><span id="ABCSimpleDeleteMicroservice-78"><a href="#ABCSimpleDeleteMicroservice-78"><span class="linenos"> 78</span></a><span class="sd">                operations.</span>
</span><span id="ABCSimpleDeleteMicroservice-79"><a href="#ABCSimpleDeleteMicroservice-79"><span class="linenos"> 79</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleDeleteMicroservice-80"><a href="#ABCSimpleDeleteMicroservice-80"><span class="linenos"> 80</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary.&#39;.</span>
</span><span id="ABCSimpleDeleteMicroservice-81"><a href="#ABCSimpleDeleteMicroservice-81"><span class="linenos"> 81</span></a><span class="sd">                This indicates that the `file_field` was not set as a file</span>
</span><span id="ABCSimpleDeleteMicroservice-82"><a href="#ABCSimpleDeleteMicroservice-82"><span class="linenos"> 82</span></a><span class="sd">                field on the backend.</span>
</span><span id="ABCSimpleDeleteMicroservice-83"><a href="#ABCSimpleDeleteMicroservice-83"><span class="linenos"> 83</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleDeleteMicroservice-84"><a href="#ABCSimpleDeleteMicroservice-84"><span class="linenos"> 84</span></a><span class="sd">                &#39;File does not exist. File field [{}] is set as None&#39;.</span>
</span><span id="ABCSimpleDeleteMicroservice-85"><a href="#ABCSimpleDeleteMicroservice-85"><span class="linenos"> 85</span></a><span class="sd">                This indicates that the object does not exists on storage,</span>
</span><span id="ABCSimpleDeleteMicroservice-86"><a href="#ABCSimpleDeleteMicroservice-86"><span class="linenos"> 86</span></a><span class="sd">                it should not occur. It might have been some manual update</span>
</span><span id="ABCSimpleDeleteMicroservice-87"><a href="#ABCSimpleDeleteMicroservice-87"><span class="linenos"> 87</span></a><span class="sd">                of the database or at the storage level.</span>
</span><span id="ABCSimpleDeleteMicroservice-88"><a href="#ABCSimpleDeleteMicroservice-88"><span class="linenos"> 88</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleDeleteMicroservice-89"><a href="#ABCSimpleDeleteMicroservice-89"><span class="linenos"> 89</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_remove_file_field</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice-90"><a href="#ABCSimpleDeleteMicroservice-90"><span class="linenos"> 90</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_delete</span><span class="p">(</span>
</span><span id="ABCSimpleDeleteMicroservice-91"><a href="#ABCSimpleDeleteMicroservice-91"><span class="linenos"> 91</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice-92"><a href="#ABCSimpleDeleteMicroservice-92"><span class="linenos"> 92</span></a>            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file-field&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">})</span>
</span><span id="ABCSimpleDeleteMicroservice-93"><a href="#ABCSimpleDeleteMicroservice-93"><span class="linenos"> 93</span></a>
</span><span id="ABCSimpleDeleteMicroservice-94"><a href="#ABCSimpleDeleteMicroservice-94"><span class="linenos"> 94</span></a>    <span class="c1"># Create an alias for backward compatibility.</span>
</span><span id="ABCSimpleDeleteMicroservice-95"><a href="#ABCSimpleDeleteMicroservice-95"><span class="linenos"> 95</span></a>    <span class="n">remove_file_field</span> <span class="o">=</span> <span class="n">delete_file</span>
</span><span id="ABCSimpleDeleteMicroservice-96"><a href="#ABCSimpleDeleteMicroservice-96"><span class="linenos"> 96</span></a>
</span><span id="ABCSimpleDeleteMicroservice-97"><a href="#ABCSimpleDeleteMicroservice-97"><span class="linenos"> 97</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ABCSimpleDeleteMicroservice-98"><a href="#ABCSimpleDeleteMicroservice-98"><span class="linenos"> 98</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_build_delete_many_request_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">):</span>
</span><span id="ABCSimpleDeleteMicroservice-99"><a href="#ABCSimpleDeleteMicroservice-99"><span class="linenos"> 99</span></a>        <span class="k">return</span> <span class="s2">&quot;rest/</span><span class="si">%s</span><span class="s2">/delete/&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice-100"><a href="#ABCSimpleDeleteMicroservice-100"><span class="linenos">100</span></a>
</span><span id="ABCSimpleDeleteMicroservice-101"><a href="#ABCSimpleDeleteMicroservice-101"><span class="linenos">101</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_many</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filter_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="ABCSimpleDeleteMicroservice-102"><a href="#ABCSimpleDeleteMicroservice-102"><span class="linenos">102</span></a>                    <span class="n">exclude_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ABCSimpleDeleteMicroservice-103"><a href="#ABCSimpleDeleteMicroservice-103"><span class="linenos">103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove many objects using query to retrict removal.</span>
</span><span id="ABCSimpleDeleteMicroservice-104"><a href="#ABCSimpleDeleteMicroservice-104"><span class="linenos">104</span></a>
</span><span id="ABCSimpleDeleteMicroservice-105"><a href="#ABCSimpleDeleteMicroservice-105"><span class="linenos">105</span></a><span class="sd">        CAUTION It is not possible to undo this operation, model_class</span>
</span><span id="ABCSimpleDeleteMicroservice-106"><a href="#ABCSimpleDeleteMicroservice-106"><span class="linenos">106</span></a><span class="sd">        this deleted field will be removed from database when using this</span>
</span><span id="ABCSimpleDeleteMicroservice-107"><a href="#ABCSimpleDeleteMicroservice-107"><span class="linenos">107</span></a><span class="sd">        end-point, different from using delete end-point.</span>
</span><span id="ABCSimpleDeleteMicroservice-108"><a href="#ABCSimpleDeleteMicroservice-108"><span class="linenos">108</span></a>
</span><span id="ABCSimpleDeleteMicroservice-109"><a href="#ABCSimpleDeleteMicroservice-109"><span class="linenos">109</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleDeleteMicroservice-110"><a href="#ABCSimpleDeleteMicroservice-110"><span class="linenos">110</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleDeleteMicroservice-111"><a href="#ABCSimpleDeleteMicroservice-111"><span class="linenos">111</span></a><span class="sd">                Model class to delete the object</span>
</span><span id="ABCSimpleDeleteMicroservice-112"><a href="#ABCSimpleDeleteMicroservice-112"><span class="linenos">112</span></a><span class="sd">            filter_dict:</span>
</span><span id="ABCSimpleDeleteMicroservice-113"><a href="#ABCSimpleDeleteMicroservice-113"><span class="linenos">113</span></a><span class="sd">                Dictionary to make filter query.</span>
</span><span id="ABCSimpleDeleteMicroservice-114"><a href="#ABCSimpleDeleteMicroservice-114"><span class="linenos">114</span></a><span class="sd">            exclude_dict:</span>
</span><span id="ABCSimpleDeleteMicroservice-115"><a href="#ABCSimpleDeleteMicroservice-115"><span class="linenos">115</span></a><span class="sd">                Dictionary to make exclude query.</span>
</span><span id="ABCSimpleDeleteMicroservice-116"><a href="#ABCSimpleDeleteMicroservice-116"><span class="linenos">116</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleDeleteMicroservice-117"><a href="#ABCSimpleDeleteMicroservice-117"><span class="linenos">117</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleDeleteMicroservice-118"><a href="#ABCSimpleDeleteMicroservice-118"><span class="linenos">118</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleDeleteMicroservice-119"><a href="#ABCSimpleDeleteMicroservice-119"><span class="linenos">119</span></a>
</span><span id="ABCSimpleDeleteMicroservice-120"><a href="#ABCSimpleDeleteMicroservice-120"><span class="linenos">120</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleDeleteMicroservice-121"><a href="#ABCSimpleDeleteMicroservice-121"><span class="linenos">121</span></a><span class="sd">            True if delete is ok.</span>
</span><span id="ABCSimpleDeleteMicroservice-122"><a href="#ABCSimpleDeleteMicroservice-122"><span class="linenos">122</span></a>
</span><span id="ABCSimpleDeleteMicroservice-123"><a href="#ABCSimpleDeleteMicroservice-123"><span class="linenos">123</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleDeleteMicroservice-124"><a href="#ABCSimpleDeleteMicroservice-124"><span class="linenos">124</span></a><span class="sd">            PumpWoodObjectDeleteException:</span>
</span><span id="ABCSimpleDeleteMicroservice-125"><a href="#ABCSimpleDeleteMicroservice-125"><span class="linenos">125</span></a><span class="sd">                Raises error if there is any error when commiting object</span>
</span><span id="ABCSimpleDeleteMicroservice-126"><a href="#ABCSimpleDeleteMicroservice-126"><span class="linenos">126</span></a><span class="sd">                deletion on database.</span>
</span><span id="ABCSimpleDeleteMicroservice-127"><a href="#ABCSimpleDeleteMicroservice-127"><span class="linenos">127</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleDeleteMicroservice-128"><a href="#ABCSimpleDeleteMicroservice-128"><span class="linenos">128</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_delete_many_request_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice-129"><a href="#ABCSimpleDeleteMicroservice-129"><span class="linenos">129</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_post</span><span class="p">(</span>
</span><span id="ABCSimpleDeleteMicroservice-130"><a href="#ABCSimpleDeleteMicroservice-130"><span class="linenos">130</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice-131"><a href="#ABCSimpleDeleteMicroservice-131"><span class="linenos">131</span></a>            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;filter_dict&#39;</span><span class="p">:</span> <span class="n">filter_dict</span><span class="p">,</span> <span class="s1">&#39;exclude_dict&#39;</span><span class="p">:</span> <span class="n">exclude_dict</span><span class="p">},</span>
</span><span id="ABCSimpleDeleteMicroservice-132"><a href="#ABCSimpleDeleteMicroservice-132"><span class="linenos">132</span></a>            <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Abstract class for calls at Pumpwood delete end-points.</p>
</div>


                            <div id="ABCSimpleDeleteMicroservice.delete" class="classattr">
                                        <input id="ABCSimpleDeleteMicroservice.delete-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">pk</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="ABCSimpleDeleteMicroservice.delete-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleDeleteMicroservice.delete"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleDeleteMicroservice.delete-13"><a href="#ABCSimpleDeleteMicroservice.delete-13"><span class="linenos">13</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-14"><a href="#ABCSimpleDeleteMicroservice.delete-14"><span class="linenos">14</span></a>               <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-15"><a href="#ABCSimpleDeleteMicroservice.delete-15"><span class="linenos">15</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Send delete request to a PumpWood object.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-16"><a href="#ABCSimpleDeleteMicroservice.delete-16"><span class="linenos">16</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete-17"><a href="#ABCSimpleDeleteMicroservice.delete-17"><span class="linenos">17</span></a><span class="sd">        Delete (or whatever the PumpWood system have been implemented) the</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-18"><a href="#ABCSimpleDeleteMicroservice.delete-18"><span class="linenos">18</span></a><span class="sd">        object with the specified pk.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-19"><a href="#ABCSimpleDeleteMicroservice.delete-19"><span class="linenos">19</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete-20"><a href="#ABCSimpleDeleteMicroservice.delete-20"><span class="linenos">20</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-21"><a href="#ABCSimpleDeleteMicroservice.delete-21"><span class="linenos">21</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-22"><a href="#ABCSimpleDeleteMicroservice.delete-22"><span class="linenos">22</span></a><span class="sd">                Model class to delete the object</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-23"><a href="#ABCSimpleDeleteMicroservice.delete-23"><span class="linenos">23</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-24"><a href="#ABCSimpleDeleteMicroservice.delete-24"><span class="linenos">24</span></a><span class="sd">                Object pk to be deleted (or whatever the PumpWood system</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-25"><a href="#ABCSimpleDeleteMicroservice.delete-25"><span class="linenos">25</span></a><span class="sd">                have been implemented). Some model_class with &#39;deleted&#39; field</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-26"><a href="#ABCSimpleDeleteMicroservice.delete-26"><span class="linenos">26</span></a><span class="sd">                does not remove the entry, it will flag deleted=True at this</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-27"><a href="#ABCSimpleDeleteMicroservice.delete-27"><span class="linenos">27</span></a><span class="sd">                cases. Model class with delete=True will be not retrieved</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-28"><a href="#ABCSimpleDeleteMicroservice.delete-28"><span class="linenos">28</span></a><span class="sd">                by default on `list` and `list_without_pag` end-points.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-29"><a href="#ABCSimpleDeleteMicroservice.delete-29"><span class="linenos">29</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-30"><a href="#ABCSimpleDeleteMicroservice.delete-30"><span class="linenos">30</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-31"><a href="#ABCSimpleDeleteMicroservice.delete-31"><span class="linenos">31</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-32"><a href="#ABCSimpleDeleteMicroservice.delete-32"><span class="linenos">32</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete-33"><a href="#ABCSimpleDeleteMicroservice.delete-33"><span class="linenos">33</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-34"><a href="#ABCSimpleDeleteMicroservice.delete-34"><span class="linenos">34</span></a><span class="sd">            Returns delete object.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-35"><a href="#ABCSimpleDeleteMicroservice.delete-35"><span class="linenos">35</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete-36"><a href="#ABCSimpleDeleteMicroservice.delete-36"><span class="linenos">36</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-37"><a href="#ABCSimpleDeleteMicroservice.delete-37"><span class="linenos">37</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-38"><a href="#ABCSimpleDeleteMicroservice.delete-38"><span class="linenos">38</span></a><span class="sd">                &#39;Requested object {model_class}[{pk}] not found.&#39; This</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-39"><a href="#ABCSimpleDeleteMicroservice.delete-39"><span class="linenos">39</span></a><span class="sd">                indicates that the pk was not found in database.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-40"><a href="#ABCSimpleDeleteMicroservice.delete-40"><span class="linenos">40</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-41"><a href="#ABCSimpleDeleteMicroservice.delete-41"><span class="linenos">41</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_delete_request_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice.delete-42"><a href="#ABCSimpleDeleteMicroservice.delete-42"><span class="linenos">42</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_delete</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Send delete request to a PumpWood object.</p>

<p>Delete (or whatever the PumpWood system have been implemented) the
object with the specified pk.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class:</strong>  Model class to delete the object</li>
<li><strong>pk:</strong>  Object pk to be deleted (or whatever the PumpWood system
have been implemented). Some model_class with 'deleted' field
does not remove the entry, it will flag deleted=True at this
cases. Model class with delete=True will be not retrieved
by default on <code>list</code> and <code>list_without_pag</code> end-points.</li>
<li><strong>auth_header:</strong>  Auth header to substitute the microservice original
at the request (user impersonation).</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Returns delete object.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'Requested object {model_class}[{pk}] not found.' This
indicates that the pk was not found in database.</li>
</ul>
</div>


                            </div>
                            <div id="ABCSimpleDeleteMicroservice.delete_file" class="classattr">
                                        <input id="ABCSimpleDeleteMicroservice.delete_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete_file</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">pk</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="ABCSimpleDeleteMicroservice.delete_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleDeleteMicroservice.delete_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleDeleteMicroservice.delete_file-48"><a href="#ABCSimpleDeleteMicroservice.delete_file-48"><span class="linenos">48</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-49"><a href="#ABCSimpleDeleteMicroservice.delete_file-49"><span class="linenos">49</span></a>                    <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-50"><a href="#ABCSimpleDeleteMicroservice.delete_file-50"><span class="linenos">50</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Send delete request to a PumpWood object.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-51"><a href="#ABCSimpleDeleteMicroservice.delete_file-51"><span class="linenos">51</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-52"><a href="#ABCSimpleDeleteMicroservice.delete_file-52"><span class="linenos">52</span></a><span class="sd">        Delete (or whatever the PumpWood system have been implemented) the</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-53"><a href="#ABCSimpleDeleteMicroservice.delete_file-53"><span class="linenos">53</span></a><span class="sd">        object with the specified pk.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-54"><a href="#ABCSimpleDeleteMicroservice.delete_file-54"><span class="linenos">54</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-55"><a href="#ABCSimpleDeleteMicroservice.delete_file-55"><span class="linenos">55</span></a><span class="sd">        At previous versions this function was `remove_file_field`. An alias</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-56"><a href="#ABCSimpleDeleteMicroservice.delete_file-56"><span class="linenos">56</span></a><span class="sd">        is created for backward compatibility.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-57"><a href="#ABCSimpleDeleteMicroservice.delete_file-57"><span class="linenos">57</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-58"><a href="#ABCSimpleDeleteMicroservice.delete_file-58"><span class="linenos">58</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-59"><a href="#ABCSimpleDeleteMicroservice.delete_file-59"><span class="linenos">59</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-60"><a href="#ABCSimpleDeleteMicroservice.delete_file-60"><span class="linenos">60</span></a><span class="sd">                Model class to delete the object</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-61"><a href="#ABCSimpleDeleteMicroservice.delete_file-61"><span class="linenos">61</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-62"><a href="#ABCSimpleDeleteMicroservice.delete_file-62"><span class="linenos">62</span></a><span class="sd">                Object pk to be deleted (or whatever the PumpWood system</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-63"><a href="#ABCSimpleDeleteMicroservice.delete_file-63"><span class="linenos">63</span></a><span class="sd">                have been implemented).</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-64"><a href="#ABCSimpleDeleteMicroservice.delete_file-64"><span class="linenos">64</span></a><span class="sd">            file_field:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-65"><a href="#ABCSimpleDeleteMicroservice.delete_file-65"><span class="linenos">65</span></a><span class="sd">                File field to be removed from storage.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-66"><a href="#ABCSimpleDeleteMicroservice.delete_file-66"><span class="linenos">66</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-67"><a href="#ABCSimpleDeleteMicroservice.delete_file-67"><span class="linenos">67</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-68"><a href="#ABCSimpleDeleteMicroservice.delete_file-68"><span class="linenos">68</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-69"><a href="#ABCSimpleDeleteMicroservice.delete_file-69"><span class="linenos">69</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-70"><a href="#ABCSimpleDeleteMicroservice.delete_file-70"><span class="linenos">70</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-71"><a href="#ABCSimpleDeleteMicroservice.delete_file-71"><span class="linenos">71</span></a><span class="sd">            Return True is file was successful removed</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-72"><a href="#ABCSimpleDeleteMicroservice.delete_file-72"><span class="linenos">72</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-73"><a href="#ABCSimpleDeleteMicroservice.delete_file-73"><span class="linenos">73</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-74"><a href="#ABCSimpleDeleteMicroservice.delete_file-74"><span class="linenos">74</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-75"><a href="#ABCSimpleDeleteMicroservice.delete_file-75"><span class="linenos">75</span></a><span class="sd">                &#39;storage_object attribute not set for view, file operations</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-76"><a href="#ABCSimpleDeleteMicroservice.delete_file-76"><span class="linenos">76</span></a><span class="sd">                are disable&#39;. This indicates that storage_object is not</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-77"><a href="#ABCSimpleDeleteMicroservice.delete_file-77"><span class="linenos">77</span></a><span class="sd">                associated with view, not allowing it to make storage</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-78"><a href="#ABCSimpleDeleteMicroservice.delete_file-78"><span class="linenos">78</span></a><span class="sd">                operations.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-79"><a href="#ABCSimpleDeleteMicroservice.delete_file-79"><span class="linenos">79</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-80"><a href="#ABCSimpleDeleteMicroservice.delete_file-80"><span class="linenos">80</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary.&#39;.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-81"><a href="#ABCSimpleDeleteMicroservice.delete_file-81"><span class="linenos">81</span></a><span class="sd">                This indicates that the `file_field` was not set as a file</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-82"><a href="#ABCSimpleDeleteMicroservice.delete_file-82"><span class="linenos">82</span></a><span class="sd">                field on the backend.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-83"><a href="#ABCSimpleDeleteMicroservice.delete_file-83"><span class="linenos">83</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-84"><a href="#ABCSimpleDeleteMicroservice.delete_file-84"><span class="linenos">84</span></a><span class="sd">                &#39;File does not exist. File field [{}] is set as None&#39;.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-85"><a href="#ABCSimpleDeleteMicroservice.delete_file-85"><span class="linenos">85</span></a><span class="sd">                This indicates that the object does not exists on storage,</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-86"><a href="#ABCSimpleDeleteMicroservice.delete_file-86"><span class="linenos">86</span></a><span class="sd">                it should not occur. It might have been some manual update</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-87"><a href="#ABCSimpleDeleteMicroservice.delete_file-87"><span class="linenos">87</span></a><span class="sd">                of the database or at the storage level.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-88"><a href="#ABCSimpleDeleteMicroservice.delete_file-88"><span class="linenos">88</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-89"><a href="#ABCSimpleDeleteMicroservice.delete_file-89"><span class="linenos">89</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_remove_file_field</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-90"><a href="#ABCSimpleDeleteMicroservice.delete_file-90"><span class="linenos">90</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_delete</span><span class="p">(</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-91"><a href="#ABCSimpleDeleteMicroservice.delete_file-91"><span class="linenos">91</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_file-92"><a href="#ABCSimpleDeleteMicroservice.delete_file-92"><span class="linenos">92</span></a>            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file-field&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Send delete request to a PumpWood object.</p>

<p>Delete (or whatever the PumpWood system have been implemented) the
object with the specified pk.</p>

<p>At previous versions this function was <code><a href="#ABCSimpleDeleteMicroservice.remove_file_field">remove_file_field</a></code>. An alias
is created for backward compatibility.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class:</strong>  Model class to delete the object</li>
<li><strong>pk:</strong>  Object pk to be deleted (or whatever the PumpWood system
have been implemented).</li>
<li><strong>file_field:</strong>  File field to be removed from storage.</li>
<li><strong>auth_header:</strong>  Auth header to substitute the microservice original
at the request (user impersonation).</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return True is file was successful removed</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodForbidden:</strong>  'storage_object attribute not set for view, file operations
are disable'. This indicates that storage_object is not
associated with view, not allowing it to make storage
operations.</li>
<li><strong>PumpWoodForbidden:</strong>  'file_field must be set on self.file_fields dictionary.'.
This indicates that the <code>file_field</code> was not set as a file
field on the backend.</li>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'File does not exist. File field [{}] is set as None'.
This indicates that the object does not exists on storage,
it should not occur. It might have been some manual update
of the database or at the storage level.</li>
</ul>
</div>


                            </div>
                            <div id="ABCSimpleDeleteMicroservice.remove_file_field" class="classattr">
                                        <input id="ABCSimpleDeleteMicroservice.remove_file_field-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_file_field</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">pk</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="ABCSimpleDeleteMicroservice.remove_file_field-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleDeleteMicroservice.remove_file_field"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleDeleteMicroservice.remove_file_field-48"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-48"><span class="linenos">48</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">file_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-49"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-49"><span class="linenos">49</span></a>                    <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-50"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-50"><span class="linenos">50</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Send delete request to a PumpWood object.</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-51"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-51"><span class="linenos">51</span></a>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-52"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-52"><span class="linenos">52</span></a><span class="sd">        Delete (or whatever the PumpWood system have been implemented) the</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-53"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-53"><span class="linenos">53</span></a><span class="sd">        object with the specified pk.</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-54"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-54"><span class="linenos">54</span></a>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-55"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-55"><span class="linenos">55</span></a><span class="sd">        At previous versions this function was `remove_file_field`. An alias</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-56"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-56"><span class="linenos">56</span></a><span class="sd">        is created for backward compatibility.</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-57"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-57"><span class="linenos">57</span></a>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-58"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-58"><span class="linenos">58</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-59"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-59"><span class="linenos">59</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-60"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-60"><span class="linenos">60</span></a><span class="sd">                Model class to delete the object</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-61"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-61"><span class="linenos">61</span></a><span class="sd">            pk:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-62"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-62"><span class="linenos">62</span></a><span class="sd">                Object pk to be deleted (or whatever the PumpWood system</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-63"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-63"><span class="linenos">63</span></a><span class="sd">                have been implemented).</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-64"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-64"><span class="linenos">64</span></a><span class="sd">            file_field:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-65"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-65"><span class="linenos">65</span></a><span class="sd">                File field to be removed from storage.</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-66"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-66"><span class="linenos">66</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-67"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-67"><span class="linenos">67</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-68"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-68"><span class="linenos">68</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-69"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-69"><span class="linenos">69</span></a>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-70"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-70"><span class="linenos">70</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-71"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-71"><span class="linenos">71</span></a><span class="sd">            Return True is file was successful removed</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-72"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-72"><span class="linenos">72</span></a>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-73"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-73"><span class="linenos">73</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-74"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-74"><span class="linenos">74</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-75"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-75"><span class="linenos">75</span></a><span class="sd">                &#39;storage_object attribute not set for view, file operations</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-76"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-76"><span class="linenos">76</span></a><span class="sd">                are disable&#39;. This indicates that storage_object is not</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-77"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-77"><span class="linenos">77</span></a><span class="sd">                associated with view, not allowing it to make storage</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-78"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-78"><span class="linenos">78</span></a><span class="sd">                operations.</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-79"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-79"><span class="linenos">79</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-80"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-80"><span class="linenos">80</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary.&#39;.</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-81"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-81"><span class="linenos">81</span></a><span class="sd">                This indicates that the `file_field` was not set as a file</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-82"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-82"><span class="linenos">82</span></a><span class="sd">                field on the backend.</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-83"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-83"><span class="linenos">83</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-84"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-84"><span class="linenos">84</span></a><span class="sd">                &#39;File does not exist. File field [{}] is set as None&#39;.</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-85"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-85"><span class="linenos">85</span></a><span class="sd">                This indicates that the object does not exists on storage,</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-86"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-86"><span class="linenos">86</span></a><span class="sd">                it should not occur. It might have been some manual update</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-87"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-87"><span class="linenos">87</span></a><span class="sd">                of the database or at the storage level.</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-88"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-88"><span class="linenos">88</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-89"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-89"><span class="linenos">89</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_remove_file_field</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-90"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-90"><span class="linenos">90</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_delete</span><span class="p">(</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-91"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-91"><span class="linenos">91</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span> <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice.remove_file_field-92"><a href="#ABCSimpleDeleteMicroservice.remove_file_field-92"><span class="linenos">92</span></a>            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;file-field&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Send delete request to a PumpWood object.</p>

<p>Delete (or whatever the PumpWood system have been implemented) the
object with the specified pk.</p>

<p>At previous versions this function was <code><a href="#ABCSimpleDeleteMicroservice.remove_file_field">remove_file_field</a></code>. An alias
is created for backward compatibility.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class:</strong>  Model class to delete the object</li>
<li><strong>pk:</strong>  Object pk to be deleted (or whatever the PumpWood system
have been implemented).</li>
<li><strong>file_field:</strong>  File field to be removed from storage.</li>
<li><strong>auth_header:</strong>  Auth header to substitute the microservice original
at the request (user impersonation).</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return True is file was successful removed</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodForbidden:</strong>  'storage_object attribute not set for view, file operations
are disable'. This indicates that storage_object is not
associated with view, not allowing it to make storage
operations.</li>
<li><strong>PumpWoodForbidden:</strong>  'file_field must be set on self.file_fields dictionary.'.
This indicates that the <code>file_field</code> was not set as a file
field on the backend.</li>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'File does not exist. File field [{}] is set as None'.
This indicates that the object does not exists on storage,
it should not occur. It might have been some manual update
of the database or at the storage level.</li>
</ul>
</div>


                            </div>
                            <div id="ABCSimpleDeleteMicroservice.delete_many" class="classattr">
                                        <input id="ABCSimpleDeleteMicroservice.delete_many-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete_many</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">filter_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>,</span><span class="param">	<span class="n">exclude_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>,</span><span class="param">	<span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="ABCSimpleDeleteMicroservice.delete_many-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ABCSimpleDeleteMicroservice.delete_many"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ABCSimpleDeleteMicroservice.delete_many-101"><a href="#ABCSimpleDeleteMicroservice.delete_many-101"><span class="linenos">101</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete_many</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filter_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-102"><a href="#ABCSimpleDeleteMicroservice.delete_many-102"><span class="linenos">102</span></a>                    <span class="n">exclude_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">auth_header</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-103"><a href="#ABCSimpleDeleteMicroservice.delete_many-103"><span class="linenos">103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove many objects using query to retrict removal.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-104"><a href="#ABCSimpleDeleteMicroservice.delete_many-104"><span class="linenos">104</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-105"><a href="#ABCSimpleDeleteMicroservice.delete_many-105"><span class="linenos">105</span></a><span class="sd">        CAUTION It is not possible to undo this operation, model_class</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-106"><a href="#ABCSimpleDeleteMicroservice.delete_many-106"><span class="linenos">106</span></a><span class="sd">        this deleted field will be removed from database when using this</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-107"><a href="#ABCSimpleDeleteMicroservice.delete_many-107"><span class="linenos">107</span></a><span class="sd">        end-point, different from using delete end-point.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-108"><a href="#ABCSimpleDeleteMicroservice.delete_many-108"><span class="linenos">108</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-109"><a href="#ABCSimpleDeleteMicroservice.delete_many-109"><span class="linenos">109</span></a><span class="sd">        Args:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-110"><a href="#ABCSimpleDeleteMicroservice.delete_many-110"><span class="linenos">110</span></a><span class="sd">            model_class:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-111"><a href="#ABCSimpleDeleteMicroservice.delete_many-111"><span class="linenos">111</span></a><span class="sd">                Model class to delete the object</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-112"><a href="#ABCSimpleDeleteMicroservice.delete_many-112"><span class="linenos">112</span></a><span class="sd">            filter_dict:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-113"><a href="#ABCSimpleDeleteMicroservice.delete_many-113"><span class="linenos">113</span></a><span class="sd">                Dictionary to make filter query.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-114"><a href="#ABCSimpleDeleteMicroservice.delete_many-114"><span class="linenos">114</span></a><span class="sd">            exclude_dict:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-115"><a href="#ABCSimpleDeleteMicroservice.delete_many-115"><span class="linenos">115</span></a><span class="sd">                Dictionary to make exclude query.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-116"><a href="#ABCSimpleDeleteMicroservice.delete_many-116"><span class="linenos">116</span></a><span class="sd">            auth_header:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-117"><a href="#ABCSimpleDeleteMicroservice.delete_many-117"><span class="linenos">117</span></a><span class="sd">                Auth header to substitute the microservice original</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-118"><a href="#ABCSimpleDeleteMicroservice.delete_many-118"><span class="linenos">118</span></a><span class="sd">                at the request (user impersonation).</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-119"><a href="#ABCSimpleDeleteMicroservice.delete_many-119"><span class="linenos">119</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-120"><a href="#ABCSimpleDeleteMicroservice.delete_many-120"><span class="linenos">120</span></a><span class="sd">        Returns:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-121"><a href="#ABCSimpleDeleteMicroservice.delete_many-121"><span class="linenos">121</span></a><span class="sd">            True if delete is ok.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-122"><a href="#ABCSimpleDeleteMicroservice.delete_many-122"><span class="linenos">122</span></a>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-123"><a href="#ABCSimpleDeleteMicroservice.delete_many-123"><span class="linenos">123</span></a><span class="sd">        Raises:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-124"><a href="#ABCSimpleDeleteMicroservice.delete_many-124"><span class="linenos">124</span></a><span class="sd">            PumpWoodObjectDeleteException:</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-125"><a href="#ABCSimpleDeleteMicroservice.delete_many-125"><span class="linenos">125</span></a><span class="sd">                Raises error if there is any error when commiting object</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-126"><a href="#ABCSimpleDeleteMicroservice.delete_many-126"><span class="linenos">126</span></a><span class="sd">                deletion on database.</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-127"><a href="#ABCSimpleDeleteMicroservice.delete_many-127"><span class="linenos">127</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-128"><a href="#ABCSimpleDeleteMicroservice.delete_many-128"><span class="linenos">128</span></a>        <span class="n">url_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_delete_many_request_url</span><span class="p">(</span><span class="n">model_class</span><span class="p">)</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-129"><a href="#ABCSimpleDeleteMicroservice.delete_many-129"><span class="linenos">129</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_post</span><span class="p">(</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-130"><a href="#ABCSimpleDeleteMicroservice.delete_many-130"><span class="linenos">130</span></a>            <span class="n">url</span><span class="o">=</span><span class="n">url_str</span><span class="p">,</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-131"><a href="#ABCSimpleDeleteMicroservice.delete_many-131"><span class="linenos">131</span></a>            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;filter_dict&#39;</span><span class="p">:</span> <span class="n">filter_dict</span><span class="p">,</span> <span class="s1">&#39;exclude_dict&#39;</span><span class="p">:</span> <span class="n">exclude_dict</span><span class="p">},</span>
</span><span id="ABCSimpleDeleteMicroservice.delete_many-132"><a href="#ABCSimpleDeleteMicroservice.delete_many-132"><span class="linenos">132</span></a>            <span class="n">auth_header</span><span class="o">=</span><span class="n">auth_header</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Remove many objects using query to retrict removal.</p>

<p>CAUTION It is not possible to undo this operation, model_class
this deleted field will be removed from database when using this
end-point, different from using delete end-point.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>model_class:</strong>  Model class to delete the object</li>
<li><strong>filter_dict:</strong>  Dictionary to make filter query.</li>
<li><strong>exclude_dict:</strong>  Dictionary to make exclude query.</li>
<li><strong>auth_header:</strong>  Auth header to substitute the microservice original
at the request (user impersonation).</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>True if delete is ok.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodObjectDeleteException:</strong>  Raises error if there is any error when commiting object
deletion on database.</li>
</ul>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>